Index: app/src/main/java/com/example/stremiompvplayer/viewmodels/HomeViewModel.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.stremiompvplayer.viewmodels\n\nimport android.util.Log\nimport androidx.lifecycle.LiveData\nimport androidx.lifecycle.MutableLiveData\nimport androidx.lifecycle.ViewModel\nimport androidx.lifecycle.ViewModelProvider\nimport androidx.lifecycle.viewModelScope\nimport com.example.stremiompvplayer.CatalogRepository\nimport com.example.stremiompvplayer.data.ServiceLocator\nimport com.example.stremiompvplayer.models.MetaItem\nimport com.example.stremiompvplayer.models.UserCatalog\nimport com.example.stremiompvplayer.models.WatchProgress\nimport com.example.stremiompvplayer.network.TMDBClient\nimport com.example.stremiompvplayer.utils.Secrets\nimport com.example.stremiompvplayer.utils.SessionCache\nimport com.example.stremiompvplayer.utils.SharedPreferencesManager\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.async\nimport kotlinx.coroutines.awaitAll\nimport kotlinx.coroutines.launch\nimport kotlinx.coroutines.withContext\nimport java.text.SimpleDateFormat\nimport java.util.Locale\n\ndata class HomeRow(\n    val id: String,\n    val title: String,\n    val items: List<MetaItem>\n)\n\nclass HomeViewModel(\n    private val repository: CatalogRepository,\n    private val prefsManager: SharedPreferencesManager\n) : ViewModel() {\n\n    private val _homeRows = MutableLiveData<List<HomeRow>>()\n    val homeRows: LiveData<List<HomeRow>> = _homeRows\n\n    private val _isLoading = MutableLiveData<Boolean>()\n    val isLoading: LiveData<Boolean> = _isLoading\n\n    private val apiKey: String get() = Secrets.TMDB_API_KEY\n    private val sessionCache = SessionCache.getInstance()\n\n    fun loadHomeContent() {\n        _isLoading.value = true\n        viewModelScope.launch {\n            val rows = mutableListOf<HomeRow>()\n            val userId = prefsManager.getCurrentUserId() ?: \"default\"\n\n            // 1. Load \"Next Up\" (High Priority)\n            val nextUpItems = generateNextUpList()\n            if (nextUpItems.isNotEmpty()) {\n                rows.add(HomeRow(\"next_up\", \"Next Up\", nextUpItems))\n            }\n\n            // 2. Load \"Continue Watching\"\n            val continueMovies = repository.getContinueWatching(userId, \"movie\").map {\n                MetaItem(it.itemId, \"movie\", it.name ?: \"Unknown\", it.poster, it.background, null, isWatched = false, progress = it.progress, duration = it.duration)\n            }\n            \n            // For episodes, use series poster instead of episode thumbnail\n            val continueEpisodes = repository.getContinueWatching(userId, \"episode\").map { progress ->\n                // Try to get series poster from parentId or extract from item ID\n                val seriesPoster = getSeriesPosterForEpisode(progress)\n                MetaItem(\n                    progress.itemId, \n                    \"episode\", \n                    progress.name ?: \"Unknown\", \n                    seriesPoster ?: progress.poster,  // Use series poster if available, fallback to episode still\n                    progress.background, \n                    null, \n                    isWatched = false, \n                    progress = progress.progress, \n                    duration = progress.duration\n                )\n            }\n\n            val continueWatching = (continueMovies + continueEpisodes).sortedByDescending { it.progress } // Sort by recent\n            if (continueWatching.isNotEmpty()) {\n                rows.add(HomeRow(\"continue\", \"Continue Watching\", continueWatching))\n            }\n\n            // 3. Load TMDB Catalogs (Parallel)\n            // We manually define the rows we want for the \"Browse\" experience\n            val deferredRows = listOf(\n                async { fetchTMDBRow(\"trending_movie\", \"Trending Movies\", \"movie\", \"trending\") },\n                async { fetchTMDBRow(\"popular_series\", \"Popular Series\", \"series\", \"popular\") },\n                async { fetchTMDBRow(\"popular_movies\", \"Popular Movies\", \"movie\", \"popular\") },\n                async { fetchTMDBRow(\"top_rated_series\", \"Top Rated Series\", \"series\", \"top_rated\") }\n            )\n\n            rows.addAll(deferredRows.awaitAll().filterNotNull())\n\n            _homeRows.postValue(rows)\n            _isLoading.postValue(false)\n        }\n    }\n\n    // === NEXT UP GENERATION ===\n    private suspend fun generateNextUpList(): List<MetaItem> = withContext(Dispatchers.IO) {\n        val currentUserId = prefsManager.getCurrentUserId() ?: return@withContext emptyList()\n\n        // PERFORMANCE: Check cache first (5-min TTL)\n        val cached = sessionCache.getNextUp(currentUserId)\n        if (cached != null) {\n            Log.d(\"NextUp\", \"Using cached Next Up list\")\n            return@withContext cached\n        }\n\n        val watchedEpisodes = repository.getNextUpCandidates(currentUserId)\n        val dateFormat = SimpleDateFormat(\"yyyy-MM-dd\", Locale.getDefault())\n        val today = dateFormat.format(java.util.Date())\n\n        // PERFORMANCE: Fetch all progress once to avoid queries in async loop\n        val allProgress = repository.getAllWatchProgress(currentUserId)\n        val progressMap = allProgress.associateBy { it.itemId }\n\n        val latestEpisodesByShow = watchedEpisodes\n            .filter { it.parentId != null && it.season != null && it.episode != null }\n            .groupBy { it.parentId!! }\n            .mapValues { (_, episodes) ->\n                episodes.maxWithOrNull(compareBy<WatchProgress> { it.season!! }.thenBy { it.episode!! })\n            }\n\n        // Process all shows in parallel\n        val nextUpItems = latestEpisodesByShow.mapNotNull { (showId, latestEpisode) ->\n            async {\n                if (latestEpisode == null) return@async null\n\n                val tmdbId = showId.removePrefix(\"tmdb:\").toIntOrNull() ?: return@async null\n                val currentSeason = latestEpisode.season!!\n                val currentEpisode = latestEpisode.episode!!\n\n                try {\n                    val showDetails = TMDBClient.api.getTVDetails(tmdbId, apiKey)\n                    var nextSeasonNum = currentSeason\n                    var nextEpisodeNum = currentEpisode + 1\n                    var potentialNextFound = false\n\n                    val currentSeasonSpec = showDetails.seasons?.find { it.season_number == currentSeason }\n                    if (currentSeasonSpec != null && currentEpisode < currentSeasonSpec.episode_count) {\n                        potentialNextFound = true\n                    } else {\n                        val nextSeasonSpec = showDetails.seasons?.find { it.season_number == currentSeason + 1 }\n                        if (nextSeasonSpec != null && nextSeasonSpec.episode_count > 0) {\n                            nextSeasonNum = currentSeason + 1\n                            nextEpisodeNum = 1\n                            potentialNextFound = true\n                        }\n                    }\n\n                    if (potentialNextFound) {\n                        try {\n                            val seasonDetails = TMDBClient.api.getTVSeasonDetails(tmdbId, nextSeasonNum, apiKey)\n                            val nextEpDetails = seasonDetails.episodes.find { it.episode_number == nextEpisodeNum }\n\n                            if (nextEpDetails != null) {\n                                val isReleased = nextEpDetails.airDate == null || nextEpDetails.airDate <= today\n\n                                if (isReleased) {\n                                    val nextEpisodeId = \"$showId:$nextSeasonNum:$nextEpisodeNum\"\n                                    val nextEpisodeProgress = progressMap[nextEpisodeId]\n\n                                    if (nextEpisodeProgress == null || !nextEpisodeProgress.isWatched) {\n                                        // Use series poster for episodes instead of episode thumbnail\n                                        val poster = showDetails.poster_path?.let { \"https://image.tmdb.org/t/p/w500$it\" }\n                                            ?: nextEpDetails.still_path?.let { \"https://image.tmdb.org/t/p/w500$it\" }\n\n                                        val background = showDetails.backdrop_path?.let { \"https://image.tmdb.org/t/p/original$it\" }\n                                            ?: nextEpDetails.still_path?.let { \"https://image.tmdb.org/t/p/original$it\" }\n\n                                        val metaItem = MetaItem(\n                                            id = nextEpisodeId,\n                                            type = \"episode\",\n                                            name = nextEpDetails.name,\n                                            poster = poster,\n                                            background = background,\n                                            description = nextEpDetails.overview ?: \"Next episode\",\n                                            releaseDate = nextEpDetails.airDate,\n                                            rating = nextEpDetails.voteAverage?.let { String.format(\"%.1f\", it) }\n                                        )\n                                        return@async Pair(metaItem, latestEpisode.lastUpdated)\n                                    }\n                                }\n                            }\n                        } catch (e: Exception) { Log.e(\"NextUp\", \"Failed season details\", e) }\n                    }\n                } catch (e: Exception) { Log.e(\"NextUp\", \"Error processing next episode\", e) }\n                null\n            }\n        }.awaitAll().filterNotNull()\n\n        // Sort by lastUpdated (oldest first - longest ago watched) and return only the MetaItems\n        val result = nextUpItems\n            .sortedBy { it.second }\n            .map { it.first }\n            .distinctBy { it.id }  // Remove any duplicate episodes\n\n        // PERFORMANCE: Cache the result\n        sessionCache.putNextUp(currentUserId, result)\n\n        result\n    }\n\n    private suspend fun fetchTMDBRow(id: String, title: String, type: String, category: String): HomeRow? {\n        if (apiKey.isEmpty()) return null\n        return try {\n            val items = if (type == \"movie\") {\n                val response = when(category) {\n                    \"trending\" -> TMDBClient.api.getTrendingMovies(apiKey)\n                    \"popular\" -> TMDBClient.api.getPopularMovies(apiKey)\n                    \"top_rated\" -> TMDBClient.api.getPopularMovies(apiKey) // Fallback as top_rated endpoint wasn't in interface\n                    else -> TMDBClient.api.getPopularMovies(apiKey)\n                }\n                response.results.map { it.toMetaItem() }\n            } else {\n                val response = when(category) {\n                    \"trending\" -> TMDBClient.api.getTrendingSeries(apiKey)\n                    \"popular\" -> TMDBClient.api.getPopularSeries(apiKey)\n                    else -> TMDBClient.api.getPopularSeries(apiKey)\n                }\n                response.results.map { it.toMetaItem() }\n            }\n\n            if (items.isNotEmpty()) HomeRow(id, title, items) else null\n        } catch (e: Exception) {\n            null\n        }\n    }\n\n    /**\n     * Get the series poster for an episode from WatchProgress.\n     * Episodes should display the series poster, not the episode thumbnail.\n     */\n    private suspend fun getSeriesPosterForEpisode(progress: WatchProgress): String? {\n        // Try to get series ID from parentId or parse from itemId\n        val seriesId = progress.parentId ?: run {\n            // Parse from itemId format: tmdb:12345:1:5 -> tmdb:12345\n            val parts = progress.itemId.split(\":\")\n            if (parts.size >= 2 && parts[0] == \"tmdb\") {\n                \"tmdb:${parts[1]}\"\n            } else null\n        }\n\n        if (seriesId != null && apiKey.isNotEmpty()) {\n            try {\n                val tmdbId = seriesId.removePrefix(\"tmdb:\").toIntOrNull()\n                if (tmdbId != null) {\n                    val details = TMDBClient.api.getTVDetails(tmdbId, apiKey)\n                    return details.poster_path?.let { \"https://image.tmdb.org/t/p/w500$it\" }\n                }\n            } catch (e: Exception) {\n                Log.e(\"HomeViewModel\", \"Error fetching series poster for $seriesId\", e)\n            }\n        }\n        return null\n    }\n}\n\nclass HomeViewModelFactory(\n    private val serviceLocator: ServiceLocator,\n    private val prefsManager: SharedPreferencesManager\n) : ViewModelProvider.Factory {\n    override fun <T : ViewModel> create(modelClass: Class<T>): T {\n        if (modelClass.isAssignableFrom(HomeViewModel::class.java)) {\n            @Suppress(\"UNCHECKED_CAST\")\n            return HomeViewModel(serviceLocator.catalogRepository, prefsManager) as T\n        }\n        throw IllegalArgumentException(\"Unknown ViewModel class\")\n    }\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/stremiompvplayer/viewmodels/HomeViewModel.kt b/app/src/main/java/com/example/stremiompvplayer/viewmodels/HomeViewModel.kt
--- a/app/src/main/java/com/example/stremiompvplayer/viewmodels/HomeViewModel.kt	(revision bb63d4732ba51fda5ec6a54585249992e08c2170)
+++ b/app/src/main/java/com/example/stremiompvplayer/viewmodels/HomeViewModel.kt	(date 1764435083556)
@@ -86,9 +86,7 @@
             // We manually define the rows we want for the "Browse" experience
             val deferredRows = listOf(
                 async { fetchTMDBRow("trending_movie", "Trending Movies", "movie", "trending") },
-                async { fetchTMDBRow("popular_series", "Popular Series", "series", "popular") },
-                async { fetchTMDBRow("popular_movies", "Popular Movies", "movie", "popular") },
-                async { fetchTMDBRow("top_rated_series", "Top Rated Series", "series", "top_rated") }
+                async { fetchTMDBRow("trending_series", "Trending Series", "series", "popular") }
             )
 
             rows.addAll(deferredRows.awaitAll().filterNotNull())
Index: app/src/main/java/com/example/stremiompvplayer/ui/discover/DiscoverFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.stremiompvplayer.ui.discover\n\nimport android.content.Intent\nimport android.os.Bundle\nimport android.view.ContextThemeWrapper\nimport android.view.KeyEvent\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.PopupMenu\nimport android.widget.Toast\nimport androidx.fragment.app.Fragment\nimport androidx.fragment.app.activityViewModels\nimport androidx.lifecycle.lifecycleScope\nimport androidx.recyclerview.widget.GridLayoutManager\nimport androidx.recyclerview.widget.LinearLayoutManager\nimport androidx.recyclerview.widget.RecyclerView\nimport com.bumptech.glide.Glide\nimport com.example.stremiompvplayer.MainActivity\nimport com.example.stremiompvplayer.R\nimport com.example.stremiompvplayer.data.ServiceLocator\nimport com.example.stremiompvplayer.databinding.FragmentDiscoverBinding\nimport com.example.stremiompvplayer.models.MetaItem\nimport com.example.stremiompvplayer.models.UserCatalog\nimport com.example.stremiompvplayer.utils.SharedPreferencesManager\nimport com.example.stremiompvplayer.utils.FocusMemoryManager\nimport com.example.stremiompvplayer.viewmodels.MainViewModel\nimport com.example.stremiompvplayer.viewmodels.MainViewModelFactory\nimport com.example.stremiompvplayer.adapters.PosterAdapter\nimport com.example.stremiompvplayer.ui.ResultsDisplayModule\nimport kotlinx.coroutines.Job\nimport kotlinx.coroutines.delay\nimport kotlinx.coroutines.launch\nimport java.text.SimpleDateFormat\nimport java.util.Locale\n\nclass DiscoverFragment : Fragment() {\n\n    private var _binding: FragmentDiscoverBinding? = null\n    private val binding get() = _binding!!\n\n    private val viewModel: MainViewModel by activityViewModels {\n        MainViewModelFactory(\n            ServiceLocator.getInstance(requireContext()),\n            SharedPreferencesManager.getInstance(requireContext())\n        )\n    }\n\n    private lateinit var contentAdapter: PosterAdapter\n    private lateinit var displayModule: ResultsDisplayModule\n    private var allCatalogs = listOf<UserCatalog>()  // Combined movie + series catalogs\n    private var currentCatalogIndex = 0\n    private var isShowingGenre = false\n    private var isCycling = false  // Prevents double press on DPAD_DOWN\n    private var cycleAttemptCount = 0\n\n    private var detailsUpdateJob: Job? = null\n    private val focusMemoryManager = FocusMemoryManager.getInstance()\n    private val fragmentKey: String = \"discover\"\n\n    companion object {\n        private const val ARG_TYPE = \"media_type\"\n        private const val ARG_SERIES_ID = \"series_id\"\n\n        fun newInstance(type: String, seriesId: String? = null): DiscoverFragment {\n            val fragment = DiscoverFragment()\n            val args = Bundle()\n            args.putString(ARG_TYPE, type)\n            seriesId?.let { args.putString(ARG_SERIES_ID, it) }\n            fragment.arguments = args\n            return fragment\n        }\n    }\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View {\n        _binding = FragmentDiscoverBinding.inflate(inflater, container, false)\n        return binding.root\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        // Get the media type from arguments, default to \"movie\"\n        val type = arguments?.getString(ARG_TYPE) ?: \"movie\"\n\n        // Sync the media type toggle with current content type\n        (activity as? MainActivity)?.syncMediaTypeToggle(type)\n\n        setupDisplayModule()\n        setupAdapters()\n        setupObservers()\n\n        // Check if we should navigate directly to a series\n        val seriesId = arguments?.getString(ARG_SERIES_ID)\n        if (seriesId != null) {\n            // Navigate directly to series drill-down\n            displayModule.currentDrillDownLevel = ResultsDisplayModule.DrillDownLevel.SERIES\n            displayModule.currentSeriesId = seriesId\n            viewModel.loadSeriesMeta(seriesId)\n            displayModule.updatePlayButtonVisibility()\n        } else {\n            loadCatalogs(type)\n        }\n\n        setupKeyHandling()\n    }\n\n    private fun setupDisplayModule() {\n        val config = ResultsDisplayModule.Configuration(\n            pageBackground = binding.pageBackground,\n            detailTitle = binding.detailTitle,\n            detailLogo = binding.detailLogo,\n            detailDescription = binding.detailDescription,\n            detailDate = binding.detailDate,\n            detailRating = binding.detailRating,\n            detailEpisode = binding.detailEpisode,\n            actorChips = binding.root.findViewById(R.id.actorChips),\n            btnPlay = binding.root.findViewById(R.id.btnPlay),\n            btnTrailer = binding.root.findViewById(R.id.btnTrailer),\n            btnRelated = binding.root.findViewById(R.id.btnRelated),\n            enableDrillDown = true,  // Discover uses drill-down\n            useGridLayout = false,\n            showEpisodeDescription = false\n        )\n        displayModule = ResultsDisplayModule(this, viewModel, config)\n\n        // Setup callbacks\n        displayModule.onActorClicked = { personId, actorName ->\n            viewModel.loadPersonCredits(personId)\n            updateCurrentListLabel(\"$actorName - Filmography\")\n        }\n\n        displayModule.onRelatedContentLoaded = { similarContent ->\n            contentAdapter.updateData(similarContent)\n            displayModule.updateDetailsPane(similarContent[0])\n            updateCurrentListLabel(\"Related to ${displayModule.currentSelectedItem?.name}\")\n        }\n\n        displayModule.loadGenreList = { genreId, genreName, type ->\n            loadGenreList(genreId, genreName, type)\n        }\n    }\n\n    // Dropdown removed - now browsing both movies and series together\n\n    private fun setupKeyHandling() {\n        // Make posterCarousel focusable to receive key events\n        binding.posterCarousel.isFocusable = true\n        binding.posterCarousel.isFocusableInTouchMode = true\n\n        // Key handling is done in handleKeyDown() method to avoid duplicate event processing\n    }\n\n    override fun onResume() {\n        super.onResume()\n        displayModule.currentSelectedItem?.let { displayModule.updateDetailsPane(it) }\n\n        // Restore previously focused position for seamless navigation\n        val savedPosition = focusMemoryManager.getSavedPosition(fragmentKey)\n        if (savedPosition >= 0 && savedPosition < contentAdapter.itemCount) {\n            binding.root.postDelayed({\n                binding.rvContent.scrollToPosition(savedPosition)\n                binding.rvContent.postDelayed({\n                    binding.rvContent.layoutManager?.findViewByPosition(savedPosition)?.requestFocus()\n                }, 100)\n            }, 150)\n        }\n    }\n\n    override fun onPause() {\n        super.onPause()\n        // Save current focus before leaving fragment\n        val currentView = view?.findFocus()\n        if (currentView != null) {\n            // Find the RecyclerView item view (walk up the view hierarchy)\n            var itemView = currentView\n            while (itemView != null && itemView.parent != binding.rvContent) {\n                itemView = itemView.parent as? android.view.View\n            }\n\n            // Only try to get position if we found a valid RecyclerView child\n            if (itemView != null && itemView.parent == binding.rvContent) {\n                val position = binding.rvContent.getChildAdapterPosition(itemView)\n                if (position != RecyclerView.NO_POSITION) {\n                    focusMemoryManager.saveFocus(fragmentKey, currentView, position)\n                }\n            }\n        }\n    }\n\n    fun handleKeyDown(keyCode: Int, event: KeyEvent?): Boolean {\n        if (event?.action == KeyEvent.ACTION_DOWN) {\n            when (keyCode) {\n                KeyEvent.KEYCODE_DPAD_DOWN -> {\n                    if (binding.rvContent.hasFocus() || binding.rvContent.focusedChild != null) {\n                        cycleToNextList()\n                        return true\n                    }\n                }\n                KeyEvent.KEYCODE_DPAD_UP -> {\n                    if (binding.rvContent.hasFocus() || binding.rvContent.focusedChild != null) {\n                        // Focus on Play button if available, otherwise Related button\n                        val btnPlay = binding.root.findViewById<View>(R.id.btnPlay)\n                        val btnRelated = binding.root.findViewById<View>(R.id.btnRelated)\n                        when {\n                            btnPlay?.visibility == View.VISIBLE -> btnPlay.requestFocus()\n                            btnRelated?.visibility == View.VISIBLE -> btnRelated.requestFocus()\n                            else -> btnPlay?.requestFocus() // Fallback to play even if hidden\n                        }\n                        return true\n                    }\n                }\n            }\n        }\n        return false\n    }\n\n    fun handleBackPress(): Boolean {\n        val handled = displayModule.handleBackPress()\n        if (handled) {\n            // If going back to catalog, reload the current catalog\n            if (displayModule.currentDrillDownLevel == ResultsDisplayModule.DrillDownLevel.CATALOG) {\n                if (allCatalogs.isNotEmpty() && currentCatalogIndex < allCatalogs.size) {\n                    val currentCatalog = allCatalogs[currentCatalogIndex]\n                    updateCurrentListLabel(currentCatalog.displayName)\n                    viewModel.loadContentForCatalog(currentCatalog, isInitialLoad = false)\n                }\n            }\n        }\n        return handled\n    }\n    fun focusSidebar(): Boolean {\n        binding.root.post {\n            // Focus on Play button or poster carousel\n            binding.rvContent.requestFocus()\n        }\n        return true\n    }\n\n    fun performSearch(query: String) {\n        if (query.isBlank()) return\n\n        // Reset drill-down state\n        displayModule.currentDrillDownLevel = ResultsDisplayModule.DrillDownLevel.CATALOG\n        displayModule.currentSeriesId = null\n        displayModule.currentSeasonNumber = null\n\n        // Perform dual search (movies + series)\n        viewModel.searchTMDB(query)\n\n        // Update label to show search query\n        updateCurrentListLabel(\"Search: $query\")\n        displayModule.updatePlayButtonVisibility()\n    }\n\n    private fun setupAdapters() {\n        contentAdapter = PosterAdapter(\n            items = emptyList(),\n            onClick = { item -> displayModule.onContentClicked(item) },\n            onLongClick = { item ->\n                val pos = contentAdapter.getItemPosition(item)\n                val holder = binding.rvContent.findViewHolderForAdapterPosition(pos)\n                if (holder != null) showItemMenu(holder.itemView, item)\n            }\n        )\n\n        // Horizontal scrolling for Netflix-style poster carousel\n        binding.rvContent.layoutManager = LinearLayoutManager(context, LinearLayoutManager.HORIZONTAL, false)\n        binding.rvContent.adapter = contentAdapter\n\n        binding.rvContent.addOnChildAttachStateChangeListener(object : RecyclerView.OnChildAttachStateChangeListener {\n            override fun onChildViewAttachedToWindow(view: View) {\n                view.setOnFocusChangeListener { v, hasFocus ->\n                    if (hasFocus) {\n                        val position = binding.rvContent.getChildAdapterPosition(v)\n                        if (position != RecyclerView.NO_POSITION) {\n                            // Save focus position for seamless navigation\n                            focusMemoryManager.saveFocus(fragmentKey, v, position)\n\n                            val item = contentAdapter.getItem(position)\n                            if (item != null) {\n                                detailsUpdateJob?.cancel()\n                                detailsUpdateJob = viewLifecycleOwner.lifecycleScope.launch {\n                                    delay(300) // PERFORMANCE: Reduced from 1000ms for snappier UX\n                                    if (isAdded) {\n                                        displayModule.updateDetailsPane(item)\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            override fun onChildViewDetachedFromWindow(view: View) {\n                view.setOnFocusChangeListener(null)\n            }\n        })\n    }\n\n    private fun refreshWatchStatus(item: MetaItem) {\n        val userId = SharedPreferencesManager.getInstance(requireContext()).getCurrentUserId()\n        if (userId != null) {\n            viewModel.checkWatchedStatus(item.id)\n        }\n    }\n\n    private fun loadCatalogs(type: String = \"movie\") {\n        // Fetch genres for the specified type only\n        viewModel.fetchGenres(type)\n\n        // Load catalogs for the specified type only\n        viewModel.getDiscoverCatalogs(type).observe(viewLifecycleOwner) { catalogs ->\n            // Start with regular catalogs\n            val catalogsList = catalogs.toMutableList()\n\n            // Add genre catalog at the end\n            if (type == \"movie\") {\n                viewModel.movieGenres.observe(viewLifecycleOwner) { genres ->\n                    if (genres.isNotEmpty()) {\n                        // Create synthetic catalog for movie genres\n                        val genreCatalog = UserCatalog(\n                            userId = \"\",\n                            catalogId = \"genres_movie\",\n                            catalogType = \"genre\",\n                            catalogName = \"Movie Genres\",\n                            customName = null,\n                            displayOrder = catalogsList.size,\n                            pageType = \"movie\",\n                            addonUrl = \"\",\n                            manifestId = \"genres_movie\"\n                        )\n                        catalogsList.add(genreCatalog)\n                        allCatalogs = catalogsList\n                    }\n                }\n            } else {\n                viewModel.tvGenres.observe(viewLifecycleOwner) { genres ->\n                    if (genres.isNotEmpty()) {\n                        // Create synthetic catalog for series genres\n                        val genreCatalog = UserCatalog(\n                            userId = \"\",\n                            catalogId = \"genres_series\",\n                            catalogType = \"genre\",\n                            catalogName = \"Series Genres\",\n                            customName = null,\n                            displayOrder = catalogsList.size,\n                            pageType = \"series\",\n                            addonUrl = \"\",\n                            manifestId = \"genres_series\"\n                        )\n                        catalogsList.add(genreCatalog)\n                        allCatalogs = catalogsList\n                    }\n                }\n            }\n\n            allCatalogs = catalogsList\n            currentCatalogIndex = 0\n            if (allCatalogs.isNotEmpty()) {\n                updateCurrentListLabel(allCatalogs[0].displayName)\n                viewModel.loadContentForCatalog(allCatalogs[0], isInitialLoad = true)\n            }\n        }\n    }\n\n    private fun updateCurrentListLabel(labelText: String) {\n        val label = binding.root.findViewById<android.widget.TextView>(R.id.currentListLabel)\n        label?.text = labelText\n    }\n\n    private fun loadGenreItems(isSeries: Boolean) {\n        val genreItems = mutableListOf<MetaItem>()\n        val genres = if (isSeries) viewModel.tvGenres.value else viewModel.movieGenres.value\n        val mediaType = if (isSeries) \"series\" else \"movie\"\n\n        genres?.forEach { genre ->\n            genreItems.add(MetaItem(\n                id = \"genre_${genre.id}_$mediaType\",\n                type = \"genre\",\n                name = genre.name,\n                poster = null,\n                background = null,\n                description = if (isSeries) \"${genre.name} Series\" else \"${genre.name} Movies\",\n                genreId = genre.id,\n                genreType = mediaType\n            ))\n        }\n\n        contentAdapter.updateData(genreItems)\n        if (genreItems.isNotEmpty()) {\n            displayModule.updateDetailsPane(genreItems[0])\n        }\n    }\n\n    private fun cycleToNextList() {\n        if (allCatalogs.isEmpty() || isCycling) return\n\n        // Prevent infinite loops - if we've tried all catalogs twice, stop\n        // (twice because the first round might not have loaded yet)\n        if (cycleAttemptCount >= allCatalogs.size * 2) {\n            cycleAttemptCount = 0\n            isCycling = false\n            // Clear selected item when no content is available\n            displayModule.currentSelectedItem = null\n            return\n        }\n\n        isCycling = true\n        cycleAttemptCount++\n\n        // Reset drill-down state when cycling lists\n        displayModule.currentDrillDownLevel = ResultsDisplayModule.DrillDownLevel.CATALOG\n        displayModule.currentSeriesId = null\n        displayModule.currentSeasonNumber = null\n\n        currentCatalogIndex = (currentCatalogIndex + 1) % allCatalogs.size\n        val nextCatalog = allCatalogs[currentCatalogIndex]\n        updateCurrentListLabel(nextCatalog.displayName)\n\n        // Check if this is a genre catalog\n        if (nextCatalog.catalogType == \"genre\") {\n            // Load genre items instead of regular catalog content\n            loadGenreItems(nextCatalog.catalogId.endsWith(\"series\"))\n        } else {\n            viewModel.loadContentForCatalog(nextCatalog, isInitialLoad = true)\n        }\n\n        isShowingGenre = false\n        displayModule.updatePlayButtonVisibility()\n\n        // Focus will be handled in the observer after content loads\n        binding.root.postDelayed({\n            if (contentAdapter.itemCount > 0) {\n                binding.rvContent.scrollToPosition(0)\n                binding.rvContent.post {\n                    val firstView = binding.rvContent.layoutManager?.findViewByPosition(0)\n                    firstView?.requestFocus()\n                    isCycling = false\n                    cycleAttemptCount = 0\n                }\n            } else {\n                // Reset isCycling even if empty, so the observer can trigger another cycle\n                isCycling = false\n            }\n            // If empty, the observer will trigger another cycle\n        }, 1000)\n    }\n\n    private fun loadGenreList(genreId: Int, genreName: String, type: String = \"movie\") {\n        // Reset drill-down state when loading genre\n        displayModule.currentDrillDownLevel = ResultsDisplayModule.DrillDownLevel.CATALOG\n        displayModule.currentSeriesId = null\n        displayModule.currentSeasonNumber = null\n\n        isShowingGenre = true\n        updateCurrentListLabel(\"Genre: $genreName\")\n\n        // Fetch popular movies/series for this genre\n        lifecycleScope.launch {\n            try {\n                val content = viewModel.fetchPopularByGenre(type, genreId)\n                contentAdapter.updateData(content)\n                if (content.isNotEmpty()) {\n                    displayModule.updateDetailsPane(content[0])\n                }\n                displayModule.updatePlayButtonVisibility()\n\n                // [FIX] Focus first item after loading genre\n                binding.root.postDelayed({\n                    binding.rvContent.scrollToPosition(0)\n                    val firstView = binding.rvContent.layoutManager?.findViewByPosition(0)\n                    firstView?.requestFocus()\n                }, 1000)\n\n            } catch (e: Exception) {\n                Toast.makeText(requireContext(), \"Error loading genre content\", Toast.LENGTH_SHORT).show()\n            }\n        }\n    }\n\n    private fun showItemMenu(view: View, item: MetaItem) {\n        val wrapper = ContextThemeWrapper(requireContext(),\n            android.R.style.Theme_DeviceDefault_Light_NoActionBar)\n        val popup = PopupMenu(wrapper, view)\n\n        // [FIX] Use lifecycleScope to check library status properly before showing menu\n        viewLifecycleOwner.lifecycleScope.launch {\n            val isInLibrary = viewModel.isItemInLibrarySync(item.id)\n\n            if (isInLibrary) {\n                popup.menu.add(\"Remove from Library\")\n            } else {\n                popup.menu.add(\"Add to Library\")\n            }\n\n            popup.menu.add(\"Mark as Watched\")\n            popup.menu.add(\"Clear Progress\")\n            popup.menu.add(\"Not Watching\")\n            popup.menu.add(\"Add to Trakt Watchlist\")\n            popup.menu.add(\"Remove from Trakt Watchlist\")\n            popup.menu.add(\"Rate on Trakt\")\n\n            popup.setOnMenuItemClickListener { menuItem ->\n                when (menuItem.title) {\n                    \"Add to Library\" -> {\n                        viewModel.addToLibrary(item)\n                        true\n                    }\n                    \"Remove from Library\" -> {\n                        viewModel.removeFromLibrary(item.id)\n                        true\n                    }\n                    \"Mark as Watched\" -> {\n                        viewModel.markAsWatched(item)\n                        item.isWatched = true\n                        refreshItem(item)\n                        true\n                    }\n                    \"Clear Progress\" -> {\n                        viewModel.clearWatchedStatus(item)\n                        item.isWatched = false\n                        item.progress = 0\n                        refreshItem(item)\n                        true\n                    }\n                    \"Not Watching\" -> {\n                        viewModel.markAsNotWatching(item)\n                        true\n                    }\n                    \"Add to Trakt Watchlist\" -> {\n                        viewModel.addToWatchlist(item)\n                        true\n                    }\n                    \"Remove from Trakt Watchlist\" -> {\n                        viewModel.removeFromWatchlist(item)\n                        true\n                    }\n                    \"Rate on Trakt\" -> {\n                        showRatingDialog(item)\n                        true\n                    }\n                    else -> false\n                }\n            }\n            popup.show()\n        }\n    }\n\n\n\n    private fun refreshItem(item: MetaItem) {\n        val position = contentAdapter.getItemPosition(item)\n        if (position != -1) {\n            contentAdapter.notifyItemChanged(position)\n        }\n    }\n\n    private fun showRatingDialog(item: MetaItem) {\n        val ratings = arrayOf(\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\")\n        com.google.android.material.dialog.MaterialAlertDialogBuilder(requireContext())\n            .setTitle(\"Rate ${item.name} on Trakt\")\n            .setItems(ratings) { _, which ->\n                val rating = which + 1\n                viewModel.rateOnTrakt(item, rating)\n            }\n            .setNegativeButton(\"Cancel\", null)\n            .show()\n    }\n\n\n    private fun showGenreSelectionDialog() {\n        // Show combined movie and series genres\n        val movieGenres = viewModel.movieGenres.value ?: emptyList()\n        val tvGenres = viewModel.tvGenres.value ?: emptyList()\n\n        if (movieGenres.isEmpty() && tvGenres.isEmpty()) {\n            Toast.makeText(requireContext(), \"Loading genres...\", Toast.LENGTH_SHORT).show()\n            return\n        }\n\n        val popupMenu = PopupMenu(requireContext(), binding.rvContent)\n\n        // Add movie genres\n        if (movieGenres.isNotEmpty()) {\n            popupMenu.menu.add(0, -1, 0, \"--- Movies ---\").isEnabled = false\n            movieGenres.forEach { genre ->\n                popupMenu.menu.add(0, genre.id, 0, genre.name)\n            }\n        }\n\n        // Add series genres\n        if (tvGenres.isNotEmpty()) {\n            popupMenu.menu.add(1, -1, 0, \"--- Series ---\").isEnabled = false\n            tvGenres.forEach { genre ->\n                popupMenu.menu.add(1, genre.id + 10000, 0, genre.name)  // Offset ID to distinguish\n            }\n        }\n\n        popupMenu.setOnMenuItemClickListener { menuItem ->\n            if (menuItem.itemId == -1) return@setOnMenuItemClickListener false\n\n            // Check if it's a movie or series genre\n            if (menuItem.itemId >= 10000) {\n                // Series genre\n                val genreId = menuItem.itemId - 10000\n                val selectedGenre = tvGenres.find { it.id == genreId }\n                selectedGenre?.let {\n                    loadGenreList(it.id, it.name, \"series\")\n                }\n            } else {\n                // Movie genre\n                val selectedGenre = movieGenres.find { it.id == menuItem.itemId }\n                selectedGenre?.let {\n                    loadGenreList(it.id, it.name, \"movie\")\n                }\n            }\n            true\n        }\n\n        popupMenu.show()\n    }\n\n    private fun setupObservers() {\n        viewModel.currentCatalogContent.observe(viewLifecycleOwner) { items ->\n            // Only update content if we're at catalog level (not drilled down)\n            if (displayModule.currentDrillDownLevel == ResultsDisplayModule.DrillDownLevel.CATALOG) {\n                contentAdapter.updateData(items)\n\n                if (items.isNotEmpty()) {\n                    displayModule.updateDetailsPane(items[0])\n                    // Reset cycle attempt count when we find a non-empty list\n                    if (isCycling) {\n                        cycleAttemptCount = 0\n                    }\n\n                    // Auto-focus first item when content loads\n                    binding.root.postDelayed({\n                        if (binding.rvContent.childCount > 0) {\n                            val firstView = binding.rvContent.layoutManager?.findViewByPosition(0)\n                            firstView?.requestFocus()\n                        }\n                    }, 100)\n                } else {\n                    displayModule.currentSelectedItem = null\n                    // If the list is empty, automatically cycle to the next list (even when not actively cycling)\n                    // This effectively hides empty lists from the discover page\n                    if (cycleAttemptCount < allCatalogs.size) {\n                        binding.root.postDelayed({\n                            cycleToNextList()\n                        }, 200)  // Shorter delay for smoother experience\n                    }\n                }\n                displayModule.updatePlayButtonVisibility()\n            }\n        }\n\n        viewModel.actionResult.observe(viewLifecycleOwner) { result ->\n            when (result) {\n                is MainViewModel.ActionResult.Success -> {\n                    Toast.makeText(requireContext(), result.message,\n                        Toast.LENGTH_SHORT).show()\n                }\n                is MainViewModel.ActionResult.Error -> {\n                    Toast.makeText(requireContext(), result.message,\n                        Toast.LENGTH_LONG).show()\n                }\n            }\n        }\n\n        viewModel.error.observe(viewLifecycleOwner) { errorMessage ->\n            if (errorMessage.isNotEmpty()) {\n                Toast.makeText(requireContext(), errorMessage, Toast.LENGTH_LONG).show()\n            }\n        }\n\n        viewModel.isLoading.observe(viewLifecycleOwner) { isLoading ->\n            binding.progressBar.visibility = if (isLoading) View.VISIBLE else View.GONE\n        }\n\n        viewModel.isItemWatched.observe(viewLifecycleOwner) { isWatched ->\n            displayModule.currentSelectedItem?.let { item ->\n                item.isWatched = isWatched\n            }\n        }\n\n        // Observe series meta details for drill-down navigation\n        viewModel.metaDetails.observe(viewLifecycleOwner) { meta ->\n            if (meta != null && meta.type == \"series\" && displayModule.currentDrillDownLevel == ResultsDisplayModule.DrillDownLevel.SERIES) {\n                // Display seasons in the carousel\n                val seasons = meta.videos?.mapNotNull { video ->\n                    video.season?.let { seasonNum ->\n                        MetaItem(\n                            id = \"${meta.id}:$seasonNum\",\n                            type = \"season\",\n                            name = video.title,\n                            poster = video.thumbnail,\n                            background = meta.background,\n                            description = \"Season $seasonNum\",\n                            releaseDate = video.released,\n                            rating = video.rating\n                        )\n                    }\n                } ?: emptyList()\n\n                contentAdapter.updateData(seasons)\n                if (seasons.isNotEmpty()) {\n                    displayModule.updateDetailsPane(seasons[0])\n\n                    // Auto-focus first season\n                    binding.root.postDelayed({\n                        if (binding.rvContent.childCount > 0) {\n                            val firstView = binding.rvContent.layoutManager?.findViewByPosition(0)\n                            firstView?.requestFocus()\n                        }\n                    }, 100)\n                }\n                updateCurrentListLabel(\"${meta.name} - Seasons\")\n            }\n        }\n\n        // Observe season episodes for drill-down navigation\n        viewModel.seasonEpisodes.observe(viewLifecycleOwner) { episodes ->\n            if (displayModule.currentDrillDownLevel == ResultsDisplayModule.DrillDownLevel.SEASON && episodes.isNotEmpty()) {\n                contentAdapter.updateData(episodes)\n                displayModule.updateDetailsPane(episodes[0])\n\n                // Auto-focus first episode\n                binding.root.postDelayed({\n                    if (binding.rvContent.childCount > 0) {\n                        val firstView = binding.rvContent.layoutManager?.findViewByPosition(0)\n                        firstView?.requestFocus()\n                    }\n                }, 100)\n\n                displayModule.currentSeriesId?.let { seriesId ->\n                    displayModule.currentSeasonNumber?.let { seasonNum ->\n                        updateCurrentListLabel(\"Season $seasonNum - Episodes\")\n                    }\n                }\n            }\n        }\n\n        // Observe search results for actor/person content and search\n        viewModel.searchResults.observe(viewLifecycleOwner) { results ->\n            if (results.isNotEmpty() && displayModule.currentDrillDownLevel == ResultsDisplayModule.DrillDownLevel.CATALOG) {\n                contentAdapter.updateData(results)\n                displayModule.updateDetailsPane(results[0])\n\n                // Focus first item\n                binding.root.postDelayed({\n                    binding.rvContent.scrollToPosition(0)\n                    binding.rvContent.layoutManager?.findViewByPosition(0)?.requestFocus()\n                }, 1000)\n            }\n        }\n    }\n\n\n    override fun onDestroyView() {\n        super.onDestroyView()\n        _binding = null\n        detailsUpdateJob?.cancel()\n    }\n\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/stremiompvplayer/ui/discover/DiscoverFragment.kt b/app/src/main/java/com/example/stremiompvplayer/ui/discover/DiscoverFragment.kt
--- a/app/src/main/java/com/example/stremiompvplayer/ui/discover/DiscoverFragment.kt	(revision bb63d4732ba51fda5ec6a54585249992e08c2170)
+++ b/app/src/main/java/com/example/stremiompvplayer/ui/discover/DiscoverFragment.kt	(date 1764435083572)
@@ -83,8 +83,6 @@
         // Get the media type from arguments, default to "movie"
         val type = arguments?.getString(ARG_TYPE) ?: "movie"
 
-        // Sync the media type toggle with current content type
-        (activity as? MainActivity)?.syncMediaTypeToggle(type)
 
         setupDisplayModule()
         setupAdapters()
Index: app/src/main/res/layout/fragment_home.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@color/md_theme_background\">\n\n    <!-- 1. Hero Background Image (Full width, top half) -->\n    <ImageView\n        android:id=\"@+id/pageBackground\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:scaleType=\"centerCrop\"\n        android:alpha=\"0.6\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        tools:src=\"@drawable/movie\" />\n\n    <!-- 2. Gradient Overlays for Readability -->\n    <!-- Left-to-right gradient -->\n    <View\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:background=\"@drawable/gradient_left_to_right\" />\n\n    <!-- Bottom-up gradient to blend rows -->\n    <View\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"0dp\"\n        android:background=\"@drawable/gradient_overlay\"\n        app:layout_constraintHeight_percent=\"0.6\"\n        app:layout_constraintBottom_toBottomOf=\"parent\" />\n\n    <!-- 3. Hero Details (Fixed Position) -->\n    <androidx.constraintlayout.widget.ConstraintLayout\n        android:id=\"@+id/heroDetails\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"0dp\"\n        android:paddingStart=\"48dp\"\n        android:paddingEnd=\"48dp\"\n        android:paddingTop=\"32dp\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        app:layout_constraintBottom_toTopOf=\"@+id/rvHomeRows\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\">\n\n        <!-- Logo (Top Left, 30% Width, 20% Height of screen) -->\n        <!-- Using constraintDimensionRatio to maintain aspect or just constraints -->\n        <!-- You asked for 30% width and 20% height of SCREEN.\n             Here we constraint to parent width/height with percentages.\n        -->\n        <ImageView\n            android:id=\"@+id/detailLogo\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"0dp\"\n            android:scaleType=\"fitStart\"\n            android:visibility=\"gone\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintWidth_percent=\"0.3\"\n            app:layout_constraintHeight_percent=\"0.4\"\n            tools:src=\"@drawable/movie\"\n            tools:visibility=\"visible\"/>\n\n        <!-- Text Title Fallback -->\n        <TextView\n            android:id=\"@+id/detailTitle\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:textSize=\"36sp\"\n            android:textStyle=\"bold\"\n            android:textColor=\"@color/text_primary\"\n            android:maxLines=\"2\"\n            android:ellipsize=\"end\"\n            android:visibility=\"gone\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintTop_toTopOf=\"parent\"\n            app:layout_constraintWidth_percent=\"0.4\"\n            tools:text=\"The Mandalorian\" />\n\n        <!-- Metadata Row (Rating, Episode) - Below Logo -->\n        <LinearLayout\n            android:id=\"@+id/metaRow\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:orientation=\"horizontal\"\n            android:gravity=\"center_vertical\"\n            android:layout_marginTop=\"8dp\"\n            app:layout_constraintTop_toBottomOf=\"@id/detailLogo\"\n            app:layout_constraintStart_toStartOf=\"parent\">\n\n            <TextView\n                android:id=\"@+id/detailRating\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\" 8.5\"\n                android:textColor=\"@color/warning_orange\"\n                android:textStyle=\"bold\"\n                android:textSize=\"16sp\"\n                android:layout_marginEnd=\"16dp\" />\n\n            <TextView\n                android:id=\"@+id/detailEpisode\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"S01E01\"\n                android:textSize=\"16sp\"\n                android:textColor=\"@color/text_secondary\"\n                android:layout_marginEnd=\"16dp\"\n                android:visibility=\"gone\"\n                tools:visibility=\"visible\"/>\n\n            <TextView\n                android:id=\"@+id/detailDate\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                android:text=\"2023\"\n                android:textSize=\"16sp\"\n                android:textColor=\"@color/text_secondary\" />\n        </LinearLayout>\n\n        <!-- Cast Chips - Below Metadata, Max 60% Width -->\n        <HorizontalScrollView\n            android:id=\"@+id/castScroll\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"12dp\"\n            android:scrollbars=\"none\"\n            app:layout_constraintTop_toBottomOf=\"@id/metaRow\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintWidth_percent=\"0.6\">\n\n            <com.google.android.material.chip.ChipGroup\n                android:id=\"@+id/actorChips\"\n                android:layout_width=\"wrap_content\"\n                android:layout_height=\"wrap_content\"\n                app:singleLine=\"true\"\n                app:chipSpacingHorizontal=\"8dp\">\n                <!-- Chips added dynamically -->\n            </com.google.android.material.chip.ChipGroup>\n        </HorizontalScrollView>\n\n        <!-- Description - Below Cast, Max 60% Width -->\n        <TextView\n            android:id=\"@+id/detailDescription\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginTop=\"12dp\"\n            android:maxLines=\"4\"\n            android:ellipsize=\"end\"\n            android:lineSpacingExtra=\"4dp\"\n            android:textColor=\"@color/text_secondary\"\n            android:textSize=\"16sp\"\n            app:layout_constraintTop_toBottomOf=\"@id/castScroll\"\n            app:layout_constraintStart_toStartOf=\"parent\"\n            app:layout_constraintWidth_percent=\"0.6\"\n            tools:text=\"After the fall of the Empire, a lone gunfighter makes his way through the outer reaches of the lawless galaxy.\" />\n\n    </androidx.constraintlayout.widget.ConstraintLayout>\n\n    <!-- 4. Vertical Stack of Rows (The Browse Area) -->\n    <!-- Added fadingEdge to prevent hard cuts on text when scrolling up -->\n    <androidx.recyclerview.widget.RecyclerView\n        android:id=\"@+id/rvHomeRows\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"0dp\"\n        android:paddingTop=\"16dp\"\n        android:paddingBottom=\"48dp\"\n        android:clipToPadding=\"false\"\n        android:requiresFadingEdge=\"vertical\"\n        android:fadingEdgeLength=\"48dp\"\n        app:layout_constraintHeight_percent=\"0.5\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\" />\n\n    <!-- Loading -->\n    <ProgressBar\n        android:id=\"@+id/progressBar\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_gravity=\"center\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        app:layout_constraintEnd_toEndOf=\"parent\"\n        app:layout_constraintStart_toStartOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\"\n        android:visibility=\"gone\"/>\n\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_home.xml b/app/src/main/res/layout/fragment_home.xml
--- a/app/src/main/res/layout/fragment_home.xml	(revision bb63d4732ba51fda5ec6a54585249992e08c2170)
+++ b/app/src/main/res/layout/fragment_home.xml	(date 1764435083585)
@@ -168,8 +168,6 @@
         android:paddingTop="16dp"
         android:paddingBottom="48dp"
         android:clipToPadding="false"
-        android:requiresFadingEdge="vertical"
-        android:fadingEdgeLength="48dp"
         app:layout_constraintHeight_percent="0.5"
         app:layout_constraintBottom_toBottomOf="parent"
         app:layout_constraintStart_toStartOf="parent"
Index: app/src/main/java/com/example/stremiompvplayer/ui/library/LibraryFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.stremiompvplayer.ui.library\n\nimport android.content.Intent\nimport android.os.Bundle\nimport android.view.ContextThemeWrapper\nimport android.view.LayoutInflater\nimport android.view.View\nimport android.view.ViewGroup\nimport android.widget.PopupMenu\nimport android.widget.TextView\nimport android.widget.Toast\nimport androidx.fragment.app.Fragment\nimport androidx.fragment.app.activityViewModels\nimport androidx.lifecycle.lifecycleScope\nimport androidx.recyclerview.widget.DiffUtil\nimport androidx.recyclerview.widget.GridLayoutManager\nimport androidx.recyclerview.widget.LinearLayoutManager\nimport androidx.recyclerview.widget.RecyclerView\nimport com.bumptech.glide.Glide\nimport com.example.stremiompvplayer.R\nimport com.example.stremiompvplayer.UserSelectionActivity\nimport com.example.stremiompvplayer.data.ServiceLocator\nimport com.example.stremiompvplayer.databinding.FragmentLibraryNewBinding\nimport com.example.stremiompvplayer.models.MetaItem\nimport com.example.stremiompvplayer.utils.SharedPreferencesManager\nimport com.example.stremiompvplayer.viewmodels.MainViewModel\nimport com.example.stremiompvplayer.viewmodels.MainViewModelFactory\nimport com.example.stremiompvplayer.adapters.PosterAdapter\nimport kotlinx.coroutines.Job\nimport kotlinx.coroutines.delay\nimport kotlinx.coroutines.launch\nimport java.text.SimpleDateFormat\nimport java.util.Locale\n\nclass LibraryFragment : Fragment() {\n\n    private var _binding: FragmentLibraryNewBinding? = null\n    private val binding get() = _binding!!\n\n    private val viewModel: MainViewModel by activityViewModels {\n        MainViewModelFactory(\n            ServiceLocator.getInstance(requireContext()),\n            SharedPreferencesManager.getInstance(requireContext())\n        )\n    }\n\n    private lateinit var contentAdapter: PosterAdapter\n    private var currentSelectedItem: MetaItem? = null\n    private var allLibraryItems = listOf<MetaItem>()  // Combined movie + series library\n    private var currentCatalogIndex = 0\n    private var currentCatalogs = listOf<Pair<String, List<MetaItem>>>()  // (label, items) pairs\n\n    private var detailsUpdateJob: Job? = null\n\n    // Sorting and filtering state\n    private var currentSortBy = \"dateAdded\"\n    private var currentSortAscending = false\n    private var currentGenreFilter: String? = null\n\n    // Drill-down navigation state (like DiscoverFragment)\n    private enum class DrillDownLevel { CATALOG, SERIES, SEASON }\n    private var currentDrillDownLevel = DrillDownLevel.CATALOG\n    private var currentSeriesId: String? = null\n    private var currentSeasonNumber: Int? = null\n\n    companion object {\n        private const val ARG_TYPE = \"media_type\"\n        fun newInstance(type: String): LibraryFragment {\n            val fragment = LibraryFragment()\n            val args = Bundle()\n            args.putString(ARG_TYPE, type)\n            fragment.arguments = args\n            return fragment\n        }\n    }\n\n    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View {\n        _binding = FragmentLibraryNewBinding.inflate(inflater, container, false)\n        return binding.root\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n\n        // Get the media type from arguments, default to \"movie\"\n        val type = arguments?.getString(ARG_TYPE) ?: \"movie\"\n\n        // Sync the media type toggle with current content type\n        (activity as? com.example.stremiompvplayer.MainActivity)?.syncMediaTypeToggle(type)\n\n        setupAdapters()\n        setupObservers()\n        setupKeyHandling()\n\n        loadLibrary(type)\n    }\n\n    override fun onResume() {\n        super.onResume()\n        currentSelectedItem?.let { updateDetailsPane(it) }\n    }\n\n    // Dropdown removed - now browsing both movies and series together\n\n    private fun setupKeyHandling() {\n        // Make posterCarousel focusable to receive key events\n        binding.posterCarousel.isFocusable = true\n        binding.posterCarousel.isFocusableInTouchMode = true\n\n        // Set key listener for up/down navigation\n        binding.root.setOnKeyListener { _, keyCode, event ->\n            if (event.action == android.view.KeyEvent.ACTION_DOWN) {\n                when (keyCode) {\n                    android.view.KeyEvent.KEYCODE_DPAD_DOWN -> {\n                        val focusedChild = binding.rvContent.focusedChild\n                        if (focusedChild != null) {\n                            cycleToNextList()\n                            return@setOnKeyListener true\n                        }\n                        false\n                    }\n                    android.view.KeyEvent.KEYCODE_DPAD_UP -> {\n                        val focusedChild = binding.rvContent.focusedChild\n                        if (focusedChild != null) {\n                            // Focus on Play button if available, otherwise Related button\n                            val btnPlay = binding.root.findViewById<View>(R.id.btnPlay)\n                            val btnRelated = binding.root.findViewById<View>(R.id.btnRelated)\n                            when {\n                                btnPlay?.visibility == View.VISIBLE -> btnPlay.requestFocus()\n                                btnRelated?.visibility == View.VISIBLE -> btnRelated.requestFocus()\n                                else -> btnPlay?.requestFocus() // Fallback to play even if hidden\n                            }\n                            return@setOnKeyListener true\n                        }\n                        false\n                    }\n                    else -> false\n                }\n            } else {\n                false\n            }\n        }\n    }\n\n    private fun setupAdapters() {\n        contentAdapter = PosterAdapter(\n            items = emptyList(),\n            onClick = { item -> onContentClicked(item) },\n            onLongClick = { item ->\n                val pos = contentAdapter.getItemPosition(item)\n                val holder = binding.rvContent.findViewHolderForAdapterPosition(pos)\n                if (holder != null) showItemMenu(holder.itemView, item)\n            }\n        )\n\n        // Horizontal scrolling for Netflix-style poster carousel\n        binding.rvContent.layoutManager = LinearLayoutManager(context, LinearLayoutManager.HORIZONTAL, false)\n        binding.rvContent.adapter = contentAdapter\n\n        binding.rvContent.addOnChildAttachStateChangeListener(object : RecyclerView.OnChildAttachStateChangeListener {\n            override fun onChildViewAttachedToWindow(view: View) {\n                view.setOnFocusChangeListener { v, hasFocus ->\n                    if (hasFocus) {\n                        val position = binding.rvContent.getChildAdapterPosition(v)\n                        if (position != RecyclerView.NO_POSITION) {\n                            val item = contentAdapter.getItem(position)\n                            if (item != null) {\n                                detailsUpdateJob?.cancel()\n                                detailsUpdateJob = viewLifecycleOwner.lifecycleScope.launch {\n                                    delay(300) // PERFORMANCE: Reduced delay for snappier UX\n                                    if (isAdded) {\n                                        updateDetailsPane(item)\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            override fun onChildViewDetachedFromWindow(view: View) {\n                view.setOnFocusChangeListener(null)\n            }\n        })\n\n        // Setup Play button\n        binding.root.findViewById<View>(R.id.btnPlay)?.setOnClickListener {\n            currentSelectedItem?.let { item ->\n                showStreamDialog(item)\n            }\n        }\n\n        // Setup Trailer button\n        binding.root.findViewById<View>(R.id.btnTrailer)?.setOnClickListener {\n            currentSelectedItem?.let { item ->\n                playTrailer(item)\n            }\n        }\n\n        // Setup Related button\n        binding.root.findViewById<View>(R.id.btnRelated)?.setOnClickListener {\n            currentSelectedItem?.let { item ->\n                showRelatedContent(item)\n            }\n        }\n\n        // Setup Sort/Filter button\n        binding.root.findViewById<View>(R.id.sortFilterButton)?.setOnClickListener { view ->\n            showSortFilterMenu(view)\n        }\n    }\n\n    private fun loadLibrary(type: String = \"movie\") {\n        // Load library for the specified type only\n        viewModel.filterAndSortLibrary(type)\n    }\n\n    private fun cycleToNextList() {\n        if (currentCatalogs.isEmpty()) return\n        currentCatalogIndex = (currentCatalogIndex + 1) % currentCatalogs.size\n        val (label, items) = currentCatalogs[currentCatalogIndex]\n        updateCurrentListLabel(label)\n        contentAdapter.updateData(items)\n        if (items.isNotEmpty()) {\n            updateDetailsPane(items[0])\n        }\n        // [FIX] Force focus to the first item when cycling lists\n        binding.root.postDelayed({\n            binding.rvContent.scrollToPosition(0)\n            binding.rvContent.post {\n                val firstView = binding.rvContent.layoutManager?.findViewByPosition(0)\n                firstView?.requestFocus()\n            }\n        }, 200)\n    }\n\n    private fun updateCurrentListLabel(labelText: String) {\n        val label = binding.root.findViewById<android.widget.TextView>(R.id.currentListLabel)\n        label?.text = labelText\n    }\n\n    private fun updateItemUI(item: MetaItem, isWatched: Boolean) {\n        item.isWatched = isWatched\n        item.progress = if (isWatched) item.duration else 0\n\n        val position = contentAdapter.getItemPosition(item)\n        if (position != -1) {\n            contentAdapter.notifyItemChanged(position)\n        }\n    }\n\n    private fun updateDetailsPane(item: MetaItem) {\n        currentSelectedItem = item\n\n        Glide.with(this)\n            .load(item.background ?: item.poster)\n            .into(binding.pageBackground)\n\n        val formattedDate = try {\n            item.releaseDate?.let { dateStr ->\n                val inputFormat = SimpleDateFormat(\"yyyy-MM-dd\", Locale.getDefault())\n                val outputFormat = SimpleDateFormat(\"dd MMM yy\", Locale.getDefault())\n                val date = inputFormat.parse(dateStr)\n                date?.let { outputFormat.format(it) }\n            }\n        } catch (e: Exception) {\n            item.releaseDate\n        }\n\n        binding.detailDate.text = formattedDate ?: \"\"\n        binding.detailDate.visibility = if (formattedDate.isNullOrEmpty()) View.GONE else View.VISIBLE\n        binding.detailRating.visibility = if (item.rating != null) {\n            binding.detailRating.text = \" ${item.rating}\"\n            View.VISIBLE\n        } else {\n            View.GONE\n        }\n\n        binding.detailDescription.text = item.description ?: \"No description available.\"\n\n        // Episode Info (Specific to episodes)\n        if (item.type == \"episode\") {\n            val parts = item.id.split(\":\")\n            if (parts.size >= 4) {\n                val season = parts[2]\n                val episode = parts[3]\n                binding.detailEpisode.text = \"S${season.padStart(2, '0')}E${episode.padStart(2, '0')}\"\n                binding.detailEpisode.visibility = View.VISIBLE\n            } else {\n                binding.detailEpisode.visibility = View.GONE\n            }\n        } else {\n            binding.detailEpisode.visibility = View.GONE\n        }\n\n        binding.detailTitle.text = item.name\n        binding.detailTitle.visibility = View.GONE\n        binding.detailLogo.visibility = View.GONE\n\n        viewModel.fetchItemLogo(item)\n\n        // Update actor chips\n        updateActorChips(item)\n    }\n\n    private fun showItemMenu(view: View, item: MetaItem) {\n        val wrapper = ContextThemeWrapper(requireContext(),\n            android.R.style.Theme_DeviceDefault_Light_NoActionBar)\n        val popup = PopupMenu(wrapper, view)\n\n        // Use lifecycleScope to get library status synchronously before showing menu\n        viewLifecycleOwner.lifecycleScope.launch {\n            val isInLibrary = viewModel.isItemInLibrarySync(item.id)\n\n            if (isInLibrary) {\n                popup.menu.add(\"Remove from Library\")\n            } else {\n                popup.menu.add(\"Add to Library\")\n            }\n\n            popup.menu.add(\"Mark as Watched\")\n            popup.menu.add(\"Clear Progress\")\n            popup.menu.add(\"Not Watching\")\n            popup.menu.add(\"Add to Trakt Watchlist\")\n            popup.menu.add(\"Remove from Trakt Watchlist\")\n            popup.menu.add(\"Rate on Trakt\")\n\n            popup.setOnMenuItemClickListener { menuItem ->\n                when (menuItem.title) {\n                    \"Add to Library\" -> {\n                        viewModel.addToLibrary(item)\n                        true\n                    }\n                    \"Remove from Library\" -> {\n                        viewModel.removeFromLibrary(item.id)\n                        true\n                    }\n                    \"Mark as Watched\" -> {\n                        viewModel.markAsWatched(item)\n                        item.isWatched = true\n                        item.progress = item.duration\n                        refreshItem(item)\n                        true\n                    }\n                    \"Clear Progress\" -> {\n                        viewModel.clearWatchedStatus(item)\n                        item.isWatched = false\n                        item.progress = 0\n                        refreshItem(item)\n                        true\n                    }\n                    \"Not Watching\" -> {\n                        viewModel.markAsNotWatching(item)\n                        true\n                    }\n                    \"Add to Trakt Watchlist\" -> {\n                        viewModel.addToWatchlist(item)\n                        true\n                    }\n                    \"Remove from Trakt Watchlist\" -> {\n                        viewModel.removeFromWatchlist(item)\n                        true\n                    }\n                    \"Rate on Trakt\" -> {\n                        showRatingDialog(item)\n                        true\n                    }\n                    else -> false\n                }\n            }\n            popup.show()\n        }\n    }\n\n    private fun showRatingDialog(item: MetaItem) {\n        val ratings = arrayOf(\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\")\n        com.google.android.material.dialog.MaterialAlertDialogBuilder(requireContext())\n            .setTitle(\"Rate ${item.name} on Trakt\")\n            .setItems(ratings) { _, which ->\n                val rating = which + 1\n                viewModel.rateOnTrakt(item, rating)\n            }\n            .setNegativeButton(\"Cancel\", null)\n            .show()\n    }\n\n    private fun refreshItem(item: MetaItem) {\n        val position = contentAdapter.getItemPosition(item)\n        if (position != -1) {\n            contentAdapter.notifyItemChanged(position)\n        }\n    }\n\n    private fun onContentClicked(item: MetaItem) {\n        updateDetailsPane(item)\n\n        when (item.type) {\n            \"series\" -> {\n                // Drill down into series to show seasons (like DiscoverFragment)\n                currentDrillDownLevel = DrillDownLevel.SERIES\n                currentSeriesId = item.id\n                currentSeasonNumber = null\n                viewModel.loadSeriesMeta(item.id)\n                updatePlayButtonVisibility()\n\n                // Focus first item of seasons list\n                binding.root.postDelayed({\n                    binding.rvContent.scrollToPosition(0)\n                    binding.rvContent.layoutManager?.findViewByPosition(0)?.requestFocus()\n                }, 1000)\n            }\n            \"season\" -> {\n                // Drill down into season to show episodes\n                val parts = item.id.split(\":\")\n                if (parts.size >= 2) {\n                    val seriesId = parts.dropLast(1).joinToString(\":\")\n                    val seasonNum = parts.last().toIntOrNull() ?: 1\n                    currentDrillDownLevel = DrillDownLevel.SEASON\n                    currentSeriesId = seriesId\n                    currentSeasonNumber = seasonNum\n                    viewModel.loadSeasonEpisodes(seriesId, seasonNum)\n                    updatePlayButtonVisibility()\n\n                    // Focus first item of episodes list\n                    binding.root.postDelayed({\n                        binding.rvContent.scrollToPosition(0)\n                        binding.rvContent.layoutManager?.findViewByPosition(0)?.requestFocus()\n                    }, 1000)\n                }\n            }\n            \"episode\" -> {\n                // Focus play button for playable episode\n                binding.root.findViewById<View>(R.id.btnPlay)?.requestFocus()\n            }\n            \"movie\" -> {\n                // Focus play button for playable movie\n                binding.root.findViewById<View>(R.id.btnPlay)?.requestFocus()\n            }\n            else -> {\n                // Unknown type - do nothing\n            }\n        }\n    }\n\n    private fun updatePlayButtonVisibility() {\n        val btnPlay = binding.root.findViewById<View>(R.id.btnPlay)\n        when (currentDrillDownLevel) {\n            DrillDownLevel.CATALOG -> {\n                // At catalog level, show play for movies, hide for series\n                val type = arguments?.getString(ARG_TYPE) ?: \"movie\"\n                btnPlay?.visibility = if (type == \"movie\") View.VISIBLE else View.GONE\n            }\n            DrillDownLevel.SERIES -> {\n                // At series level (showing seasons), hide play button\n                btnPlay?.visibility = View.GONE\n            }\n            DrillDownLevel.SEASON -> {\n                // At season level (showing episodes), show play button\n                btnPlay?.visibility = View.VISIBLE\n            }\n        }\n    }\n\n    fun handleBackPress(): Boolean {\n        // Handle drill-down navigation back\n        when (currentDrillDownLevel) {\n            DrillDownLevel.SEASON -> {\n                // Go back to seasons view\n                currentSeriesId?.let { seriesId ->\n                    currentDrillDownLevel = DrillDownLevel.SERIES\n                    currentSeasonNumber = null\n                    viewModel.loadSeriesMeta(seriesId)\n                    updatePlayButtonVisibility()\n                    return true\n                }\n            }\n            DrillDownLevel.SERIES -> {\n                // Go back to library view\n                currentDrillDownLevel = DrillDownLevel.CATALOG\n                currentSeriesId = null\n                currentSeasonNumber = null\n                // Reload the library\n                val type = arguments?.getString(ARG_TYPE) ?: \"movie\"\n                loadLibrary(type)\n                updatePlayButtonVisibility()\n                return true\n            }\n            DrillDownLevel.CATALOG -> {\n                // At top level, don't consume back press\n                return false\n            }\n        }\n        return false\n    }\n\n    private fun showStreamDialog(item: MetaItem) {\n        // Clear any previous streams BEFORE creating the dialog to prevent stale data\n        viewModel.clearStreams()\n\n        val dialogView = LayoutInflater.from(requireContext()).inflate(R.layout.dialog_stream_selection, null)\n        val dialog = android.app.AlertDialog.Builder(requireContext())\n            .setView(dialogView)\n            .create()\n\n        val rvStreams = dialogView.findViewById<androidx.recyclerview.widget.RecyclerView>(R.id.rvStreams)\n        val progressBar = dialogView.findViewById<android.widget.ProgressBar>(R.id.progressBar)\n        val btnCancel = dialogView.findViewById<com.google.android.material.button.MaterialButton>(R.id.btnCancel)\n        val dialogTitle = dialogView.findViewById<android.widget.TextView>(R.id.dialogTitle)\n\n        dialogTitle.text = \"Select Stream - ${item.name}\"\n\n        val streamAdapter = com.example.stremiompvplayer.adapters.StreamAdapter { stream ->\n            dialog.dismiss()\n            viewModel.clearStreams()\n            playStream(stream)\n        }\n        rvStreams.layoutManager = androidx.recyclerview.widget.LinearLayoutManager(requireContext())\n        rvStreams.adapter = streamAdapter\n\n        btnCancel.setOnClickListener {\n            dialog.dismiss()\n            viewModel.clearStreams()\n        }\n\n        // Show loading state\n        progressBar.visibility = View.VISIBLE\n        rvStreams.visibility = View.GONE\n\n        // Observe streams BEFORE loading to ensure we catch the update\n        var hasReceivedUpdate = false\n        val streamObserver = androidx.lifecycle.Observer<List<com.example.stremiompvplayer.models.Stream>> { streams ->\n            // Only process if this is an update after loadStreams() call\n            if (hasReceivedUpdate || streams.isNotEmpty()) {\n                progressBar.visibility = View.GONE\n                rvStreams.visibility = View.VISIBLE\n                if (streams.isEmpty()) {\n                    Toast.makeText(requireContext(), \"No streams available\", Toast.LENGTH_SHORT).show()\n                    dialog.dismiss()\n                } else {\n                    streamAdapter.submitList(streams)\n                    // Focus first item after list is populated\n                    rvStreams.post {\n                        rvStreams.layoutManager?.findViewByPosition(0)?.requestFocus()\n                    }\n                }\n            }\n            hasReceivedUpdate = true\n        }\n        viewModel.streams.observe(viewLifecycleOwner, streamObserver)\n\n        dialog.setOnDismissListener {\n            viewModel.streams.removeObserver(streamObserver)\n            viewModel.clearStreams()\n        }\n\n        dialog.show()\n\n        // Load streams AFTER setting up observer\n        viewModel.loadStreams(item.type, item.id)\n    }\n\n    private fun playStream(stream: com.example.stremiompvplayer.models.Stream) {\n        val intent = Intent(requireContext(), com.example.stremiompvplayer.PlayerActivity::class.java).apply {\n            putExtra(\"stream\", stream)\n            putExtra(\"meta\", currentSelectedItem)  // Pass full MetaItem for subtitles\n            putExtra(\"title\", currentSelectedItem?.name ?: \"Unknown\")\n            putExtra(\"metaId\", currentSelectedItem?.id)\n        }\n        startActivity(intent)\n    }\n\n    private fun playTrailer(item: MetaItem) {\n        viewLifecycleOwner.lifecycleScope.launch {\n            try {\n                val trailerUrl = viewModel.fetchTrailer(item.id, item.type)\n                if (trailerUrl != null) {\n                    val intent = Intent(Intent.ACTION_VIEW, android.net.Uri.parse(trailerUrl))\n                    startActivity(intent)\n                } else {\n                    Toast.makeText(requireContext(), \"No trailer available\", Toast.LENGTH_SHORT).show()\n                }\n            } catch (e: Exception) {\n                Toast.makeText(requireContext(), \"Error loading trailer\", Toast.LENGTH_SHORT).show()\n            }\n        }\n    }\n\n    private fun showRelatedContent(item: MetaItem) {\n        viewLifecycleOwner.lifecycleScope.launch {\n            try {\n                viewModel.fetchSimilarContent(item.id, item.type)\n                Toast.makeText(requireContext(), \"Loading related content...\", Toast.LENGTH_SHORT).show()\n            } catch (e: Exception) {\n                Toast.makeText(requireContext(), \"Error loading related content\", Toast.LENGTH_SHORT).show()\n            }\n        }\n    }\n\n    private fun updateActorChips(item: MetaItem) {\n        val actorChipGroup = binding.root.findViewById<com.google.android.material.chip.ChipGroup>(R.id.actorChips)\n        actorChipGroup?.removeAllViews()\n\n        // Fetch cast information from TMDB\n        viewModel.fetchCast(item.id, item.type)\n    }\n\n    private fun setupObservers() {\n        viewModel.libraryMovies.observe(viewLifecycleOwner, androidx.lifecycle.Observer {})\n        viewModel.librarySeries.observe(viewLifecycleOwner, androidx.lifecycle.Observer {})\n\n        viewModel.actionResult.observe(viewLifecycleOwner) { result ->\n            when (result) {\n                is MainViewModel.ActionResult.Success -> {\n                    Toast.makeText(requireContext(), result.message, Toast.LENGTH_SHORT).show()\n                }\n                is MainViewModel.ActionResult.Error -> {\n                    Toast.makeText(requireContext(), result.message, Toast.LENGTH_LONG).show()\n                }\n            }\n        }\n\n        // Get the media type from arguments\n        val selectedType = arguments?.getString(ARG_TYPE) ?: \"movie\"\n\n        // Observe the appropriate library based on selected type\n        if (selectedType == \"movie\") {\n            viewModel.filteredLibraryMovies.observe(viewLifecycleOwner) { movieItems ->\n                // Create catalog for movies only\n                currentCatalogs = listOf(Pair(\"My Movies\", movieItems))\n\n                // Show the movie catalog\n                currentCatalogIndex = 0\n                val (label, items) = currentCatalogs[0]\n                updateCurrentListLabel(label)\n                contentAdapter.updateData(items)\n\n                if (items.isNotEmpty()) {\n                    binding.emptyText.visibility = View.GONE\n                    binding.rvContent.visibility = View.VISIBLE\n                    updateDetailsPane(items[0])\n                } else {\n                    binding.emptyText.visibility = View.VISIBLE\n                    binding.rvContent.visibility = View.GONE\n                }\n            }\n        } else {\n            viewModel.filteredLibrarySeries.observe(viewLifecycleOwner) { seriesItems ->\n                // Create catalog for series only\n                currentCatalogs = listOf(Pair(\"My Series\", seriesItems))\n\n                // Show the series catalog\n                currentCatalogIndex = 0\n                val (label, items) = currentCatalogs[0]\n                updateCurrentListLabel(label)\n                contentAdapter.updateData(items)\n\n                if (items.isNotEmpty()) {\n                    binding.emptyText.visibility = View.GONE\n                    binding.rvContent.visibility = View.VISIBLE\n                    updateDetailsPane(items[0])\n                } else {\n                    binding.emptyText.visibility = View.VISIBLE\n                    binding.rvContent.visibility = View.GONE\n                }\n            }\n        }\n\n        viewModel.isLoading.observe(viewLifecycleOwner) { isLoading ->\n            binding.progressBar.visibility = if (isLoading) View.VISIBLE else View.GONE\n        }\n\n        // Observe cast loading state\n        viewModel.isCastLoading.observe(viewLifecycleOwner) { isLoading ->\n            if (isLoading) {\n                val actorChipGroup = binding.root.findViewById<com.google.android.material.chip.ChipGroup>(R.id.actorChips)\n                actorChipGroup?.removeAllViews()\n                val placeholderChip = com.google.android.material.chip.Chip(requireContext()).apply {\n                    text = \"No Cast Returned\"\n                    isClickable = false\n                    isFocusable = false\n                    setChipBackgroundColorResource(R.color.md_theme_surfaceContainer)\n                    setTextColor(resources.getColor(R.color.text_primary, null))\n                }\n                actorChipGroup?.addView(placeholderChip)\n            }\n        }\n\n        // Observe cast list and update actor chips\n        viewModel.castList.observe(viewLifecycleOwner) { castList ->\n            val actorChipGroup = binding.root.findViewById<com.google.android.material.chip.ChipGroup>(R.id.actorChips)\n            actorChipGroup?.removeAllViews()\n\n            if (castList.isNotEmpty()) {\n                castList.take(3).forEach { actor ->\n                    val chip = com.google.android.material.chip.Chip(requireContext())\n                    chip.text = actor.name\n                    chip.isClickable = true\n                    chip.isFocusable = true\n                    chip.setChipBackgroundColorResource(R.color.md_theme_surfaceContainer)\n                    chip.setTextColor(resources.getColor(R.color.text_primary, null))\n\n                    chip.setOnClickListener {\n                        val personId = actor.id.removePrefix(\"tmdb:\").toIntOrNull()\n                        if (personId != null) {\n                            // Navigate to search with person\n                            val intent = Intent(requireContext(), com.example.stremiompvplayer.MainActivity::class.java).apply {\n                                putExtra(\"SEARCH_PERSON_ID\", personId)\n                                putExtra(\"SEARCH_QUERY\", actor.name)\n                            }\n                            startActivity(intent)\n                        }\n                    }\n\n                    actorChipGroup?.addView(chip)\n                }\n            }\n        }\n\n        // [ADD] Observer for logo loading - same as DiscoverFragment\n        viewModel.currentLogo.observe(viewLifecycleOwner) { logoUrl ->\n            when (logoUrl) {\n                \"\" -> { // Loading\n                    binding.detailLogo.visibility = View.GONE\n                }\n                null -> { // No Logo\n                    binding.detailLogo.visibility = View.GONE\n                }\n                else -> { // Has Logo\n                    binding.detailLogo.visibility = View.VISIBLE\n                    Glide.with(this)\n                        .load(logoUrl)\n                        .fitCenter()\n                        .into(binding.detailLogo)\n                }\n            }\n        }\n\n        // Observer for series metadata (for drill-down navigation)\n        viewModel.metaDetails.observe(viewLifecycleOwner) { meta ->\n            if (meta != null && meta.type == \"series\" && currentDrillDownLevel == DrillDownLevel.SERIES) {\n                // Display seasons in the carousel\n                val seasons = meta.videos?.mapNotNull { video ->\n                    video.season?.let { seasonNum ->\n                        MetaItem(\n                            id = \"${meta.id}:$seasonNum\",\n                            type = \"season\",\n                            name = video.title,\n                            poster = video.thumbnail,\n                            background = meta.background,\n                            description = \"Season $seasonNum\"\n                        )\n                    }\n                } ?: emptyList()\n\n                contentAdapter.updateData(seasons)\n                if (seasons.isNotEmpty()) {\n                    updateDetailsPane(seasons[0])\n                }\n                updateCurrentListLabel(\"${meta.name} - Seasons\")\n            }\n        }\n\n        // Observer for season episodes (for drill-down navigation)\n        viewModel.seasonEpisodes.observe(viewLifecycleOwner) { episodes ->\n            if (currentDrillDownLevel == DrillDownLevel.SEASON && episodes.isNotEmpty()) {\n                contentAdapter.updateData(episodes)\n                updateDetailsPane(episodes[0])\n                currentSeriesId?.let { seriesId ->\n                    currentSeasonNumber?.let { seasonNum ->\n                        updateCurrentListLabel(\"Season $seasonNum - Episodes\")\n                    }\n                }\n            }\n        }\n    }\n\n    private fun showSortFilterMenu(view: View) {\n        val wrapper = ContextThemeWrapper(requireContext(),\n            android.R.style.Theme_DeviceDefault_Light_NoActionBar)\n        val popup = PopupMenu(wrapper, view)\n\n        // Add sorting options\n        popup.menu.add(\"Sort by Release Date (Newest First)\")\n        popup.menu.add(\"Sort by Release Date (Oldest First)\")\n        popup.menu.add(\"Sort by Name (A-Z)\")\n        popup.menu.add(\"Sort by Name (Z-A)\")\n        popup.menu.add(\"Sort by Date Added (Newest First)\")\n        popup.menu.add(\"Sort by Date Added (Oldest First)\")\n\n        // Add genre filter option\n        popup.menu.add(\"Filter by Genre...\")\n\n        popup.setOnMenuItemClickListener { menuItem ->\n            val type = arguments?.getString(ARG_TYPE) ?: \"movie\"\n            when (menuItem.title) {\n                \"Sort by Release Date (Newest First)\" -> {\n                    currentSortBy = \"releaseDate\"\n                    currentSortAscending = false\n                    viewModel.filterAndSortLibrary(type, currentGenreFilter, currentSortBy, currentSortAscending)\n                    true\n                }\n                \"Sort by Release Date (Oldest First)\" -> {\n                    currentSortBy = \"releaseDate\"\n                    currentSortAscending = true\n                    viewModel.filterAndSortLibrary(type, currentGenreFilter, currentSortBy, currentSortAscending)\n                    true\n                }\n                \"Sort by Name (A-Z)\" -> {\n                    currentSortBy = \"title\"\n                    currentSortAscending = true\n                    viewModel.filterAndSortLibrary(type, currentGenreFilter, currentSortBy, currentSortAscending)\n                    true\n                }\n                \"Sort by Name (Z-A)\" -> {\n                    currentSortBy = \"title\"\n                    currentSortAscending = false\n                    viewModel.filterAndSortLibrary(type, currentGenreFilter, currentSortBy, currentSortAscending)\n                    true\n                }\n                \"Sort by Date Added (Newest First)\" -> {\n                    currentSortBy = \"dateAdded\"\n                    currentSortAscending = false\n                    viewModel.filterAndSortLibrary(type, currentGenreFilter, currentSortBy, currentSortAscending)\n                    true\n                }\n                \"Sort by Date Added (Oldest First)\" -> {\n                    currentSortBy = \"dateAdded\"\n                    currentSortAscending = true\n                    viewModel.filterAndSortLibrary(type, currentGenreFilter, currentSortBy, currentSortAscending)\n                    true\n                }\n                \"Filter by Genre...\" -> {\n                    showGenreFilterDialog()\n                    true\n                }\n                else -> false\n            }\n        }\n        popup.show()\n    }\n\n    private fun showGenreFilterDialog() {\n        // Fetch genres for the current type\n        val type = arguments?.getString(ARG_TYPE) ?: \"movie\"\n\n        // Use the appropriate genre list based on type\n        val genreSource = if (type == \"movie\") viewModel.movieGenres else viewModel.tvGenres\n\n        // Check if genres are already loaded\n        if (genreSource.value != null && genreSource.value!!.isNotEmpty()) {\n            showGenreSelectionDialog(genreSource.value!!, type)\n        } else {\n            // Fetch genres if not loaded\n            viewModel.fetchGenres(type)\n\n            // Show loading dialog while genres are being fetched\n            val builder = android.app.AlertDialog.Builder(requireContext())\n            builder.setTitle(\"Select Genre\")\n            builder.setMessage(\"Loading genres...\")\n            val loadingDialog = builder.create()\n            loadingDialog.show()\n\n            // Observe once and show selection dialog\n            genreSource.observe(viewLifecycleOwner, object : androidx.lifecycle.Observer<List<com.example.stremiompvplayer.models.TMDBGenre>> {\n                override fun onChanged(genres: List<com.example.stremiompvplayer.models.TMDBGenre>) {\n                    loadingDialog.dismiss()\n                    genreSource.removeObserver(this)\n\n                    if (genres.isEmpty()) {\n                        Toast.makeText(requireContext(), \"No genres available\", Toast.LENGTH_SHORT).show()\n                        return\n                    }\n\n                    showGenreSelectionDialog(genres, type)\n                }\n            })\n        }\n    }\n\n    private fun showGenreSelectionDialog(genres: List<com.example.stremiompvplayer.models.TMDBGenre>, type: String) {\n        val genreNames = listOf(\"All Genres\") + genres.map { it.name }\n        val genreIds = listOf(null) + genres.map { it.id.toString() }\n\n        android.app.AlertDialog.Builder(requireContext())\n            .setTitle(\"Select Genre\")\n            .setItems(genreNames.toTypedArray()) { _, which ->\n                currentGenreFilter = genreIds[which]\n                val selectedGenreName = genreNames[which]\n\n                // Update label to show filter\n                val label = if (currentGenreFilter == null) {\n                    if (type == \"movie\") \"My Movies\" else \"My Series\"\n                } else {\n                    if (type == \"movie\") \"My Movies - $selectedGenreName\" else \"My Series - $selectedGenreName\"\n                }\n                updateCurrentListLabel(label)\n\n                // Apply filter\n                viewModel.filterAndSortLibrary(type, currentGenreFilter, currentSortBy, currentSortAscending)\n            }\n            .setNegativeButton(\"Cancel\", null)\n            .show()\n    }\n\n    fun focusSidebar(): Boolean {\n        binding.root.post {\n            // Focus on Play button or poster carousel\n            binding.root.findViewById<View>(R.id.btnPlay)?.requestFocus()\n                ?: binding.rvContent.requestFocus()\n        }\n        return true\n    }\n\n    override fun onDestroyView() {\n        super.onDestroyView()\n        _binding = null\n        detailsUpdateJob?.cancel()\n    }\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/stremiompvplayer/ui/library/LibraryFragment.kt b/app/src/main/java/com/example/stremiompvplayer/ui/library/LibraryFragment.kt
--- a/app/src/main/java/com/example/stremiompvplayer/ui/library/LibraryFragment.kt	(revision bb63d4732ba51fda5ec6a54585249992e08c2170)
+++ b/app/src/main/java/com/example/stremiompvplayer/ui/library/LibraryFragment.kt	(date 1764435083601)
@@ -85,8 +85,6 @@
         // Get the media type from arguments, default to "movie"
         val type = arguments?.getString(ARG_TYPE) ?: "movie"
 
-        // Sync the media type toggle with current content type
-        (activity as? com.example.stremiompvplayer.MainActivity)?.syncMediaTypeToggle(type)
 
         setupAdapters()
         setupObservers()
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project version=\"4\">\n  <component name=\"AndroidLayouts\">\n    <shared>\n      <config />\n    </shared>\n    <layouts>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/color/focus_indicator_selector.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/avatar_background.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/background_content_box.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/badge_background.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/button_background.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/button_background_modern.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/default_background.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/focus_border_red.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/gradient_netflix_overlay.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/gradient_overlay.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/gradient_overlay_modern.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_arrow_back_white_24dp.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_arrow_drop_down.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_arrow_up.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_check_circle.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_discover.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_exit_to_app.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_expand_more.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_grid_view.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_home.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_library.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_list_view.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_movie.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_person.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_play_circle.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_search.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_search_off.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_settings.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_star.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_tv.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/ic_wifi.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/modern_background.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/modern_button_background.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/modern_focus_selector.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/modern_gradient_overlay.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/modern_rating_badge.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/poster_gradient_overlay.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/drawable/selector_focus_border.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/activity_main.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/activity_player.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/activity_settings.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/activity_tv_settings.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/activity_user_selection.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/dialog_content_options.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/dialog_search.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/dialog_stream_selection.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/dialog_tmdb_auth.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/fragment_discover.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/fragment_home.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/fragment_library_new.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/fragment_livetv.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/fragment_search_new.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/item_catalog_config.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/item_home_section.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/item_poster.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/item_stream.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/item_tv_channel.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/item_user_list.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/layout/netflix_sidebar.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/mipmap-anydpi-v26/ic_launcher.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/mipmap-anydpi-v26/ic_launcher_round.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer</theme>\n        </config>\n      </layout>\n      <layout url=\"file://$PROJECT_DIR$/app/src/main/res/xml/network_security_config.xml\">\n        <config>\n          <theme>@style/Theme.StremioMPVPlayer.Leanback</theme>\n        </config>\n      </layout>\n    </layouts>\n  </component>\n  <component name=\"AutoImportSettings\">\n    <option name=\"autoReloadType\" value=\"NONE\" />\n  </component>\n  <component name=\"ChangeListManager\">\n    <list default=\"true\" id=\"2c02766e-19a3-4317-ae82-959ae60a24cb\" name=\"Changes\" comment=\"Update visual assets\">\n      <change beforePath=\"$PROJECT_DIR$/app/build.gradle\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/build.gradle\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/MainActivity.kt\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/MainActivity.kt\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/PlayerActivity.kt\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/PlayerActivity.kt\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/ui/home/HomeFragment.kt\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/ui/home/HomeFragment.kt\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/res/drawable/gradient_overlay.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/res/drawable/gradient_overlay.xml\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/res/layout/activity_player.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/res/layout/activity_player.xml\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/res/layout/fragment_home.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/res/layout/fragment_home.xml\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/res/layout/fragment_library_new.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/res/layout/fragment_library_new.xml\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/res/layout/item_poster.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/res/layout/item_poster.xml\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/app/src/main/res/values/dimens.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/app/src/main/res/values/dimens.xml\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/build.gradle\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/build.gradle\" afterDir=\"false\" />\n    </list>\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\n  </component>\n  <component name=\"ClangdSettings\">\n    <option name=\"formatViaClangd\" value=\"false\" />\n  </component>\n  <component name=\"ExecutionTargetManager\" SELECTED_TARGET=\"device_and_snapshot_combo_box_target[DeviceId(pluginId=Default, isTemplate=false, identifier=serial=192.168.1.235:5555;connection=bd7c84a1)]\" />\n  <component name=\"ExternalProjectsData\">\n    <projectState path=\"$PROJECT_DIR$\">\n      <ProjectState />\n    </projectState>\n  </component>\n  <component name=\"ExternalProjectsManager\">\n    <system id=\"GRADLE\">\n      <state>\n        <projects_view>\n          <tree_state>\n            <expand>\n              <path>\n                <item name=\"\" type=\"6a2764b6:ExternalProjectsStructure$RootNode\" />\n                <item name=\"StremioMPVPlayer\" type=\"f1a62948:ProjectNode\" />\n              </path>\n            </expand>\n            <select />\n          </tree_state>\n        </projects_view>\n      </state>\n    </system>\n  </component>\n  <component name=\"FileTemplateManagerImpl\">\n    <option name=\"RECENT_TEMPLATES\">\n      <list>\n        <option value=\"Kotlin Data Class\" />\n        <option value=\"Class\" />\n        <option value=\"Kotlin File\" />\n        <option value=\"valueResourceFile\" />\n        <option value=\"resourceFile\" />\n        <option value=\"Kotlin Class\" />\n        <option value=\"layoutResourceFile\" />\n      </list>\n    </option>\n  </component>\n  <component name=\"GenerateSignedApkSettings\">\n    <option name=\"BUILD_TARGET_KEY\" value=\"apk\" />\n  </component>\n  <component name=\"Git.Settings\">\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\n      <map>\n        <entry key=\"$PROJECT_DIR$\" value=\"master\" />\n      </map>\n    </option>\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\n  </component>\n  <component name=\"GitHubPullRequestSearchHistory\">{\n  &quot;lastFilter&quot;: {\n    &quot;state&quot;: &quot;OPEN&quot;,\n    &quot;assignee&quot;: &quot;shiggsy365-maker&quot;\n  }\n}</component>\n  <component name=\"GithubPullRequestsUISettings\">{\n  &quot;selectedUrlAndAccountId&quot;: {\n    &quot;url&quot;: &quot;https://github.com/shiggsy365/BINGE.git&quot;,\n    &quot;accountId&quot;: &quot;4bb637b3-d6d5-4661-b5ed-e0473b167b56&quot;\n  }\n}</component>\n  <component name=\"ProblemsViewState\">\n    <option name=\"selectedTabId\" value=\"CurrentFile\" />\n    <option name=\"showPreview\" value=\"true\" />\n  </component>\n  <component name=\"ProjectColorInfo\">{\n  &quot;associatedIndex&quot;: 0\n}</component>\n  <component name=\"ProjectId\" id=\"35bEU0DGeQmI8RsswKzeu8HRMFt\" />\n  <component name=\"ProjectLevelVcsManager\">\n    <ConfirmationsSetting value=\"1\" id=\"Add\" />\n  </component>\n  <component name=\"ProjectViewState\">\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\n    <option name=\"showLibraryContents\" value=\"true\" />\n  </component>\n  <component name=\"PropertiesComponent\"><![CDATA[{\n  \"keyToString\": {\n    \"Android App.app.executor\": \"Run\",\n    \"ApkExportedModule\": \"BINGE.app\",\n    \"ModuleVcsDetector.initialDetectionPerformed\": \"true\",\n    \"RunOnceActivity.ShowReadmeOnStart\": \"true\",\n    \"RunOnceActivity.TerminalTabsStorage.copyFrom.TerminalArrangementManager\": \"true\",\n    \"RunOnceActivity.cidr.known.project.marker\": \"true\",\n    \"RunOnceActivity.git.unshallow\": \"true\",\n    \"RunOnceActivity.readMode.enableVisualFormatting\": \"true\",\n    \"SHARE_PROJECT_CONFIGURATION_FILES\": \"true\",\n    \"cf.first.check.clang-format\": \"false\",\n    \"cidr.known.project.marker\": \"true\",\n    \"com.google.services.firebase.aqiPopupShown\": \"true\",\n    \"git-widget-placeholder\": \"UpdateUI\",\n    \"last_opened_file_path\": \"/home/jon/AndroidStudioProjects/BINGE3/app/src/main/res/drawable\",\n    \"project.structure.last.edited\": \"Variables\",\n    \"project.structure.proportion\": \"0.17\",\n    \"project.structure.side.proportion\": \"0.0\",\n    \"recommended.upgrade.last.time.stamp\": \"1763425586759\",\n    \"settings.editor.selected.configurable\": \"memory.settings\"\n  }\n}]]></component>\n  <component name=\"RecentsManager\">\n    <key name=\"android.template.326038633\">\n      <recent name=\"com.example.stremiompvplayer\" />\n    </key>\n    <key name=\"CopyFile.RECENT_KEYS\">\n      <recent name=\"$PROJECT_DIR$/app/src/main/res/drawable\" />\n      <recent name=\"$PROJECT_DIR$/app/src/main/res/values\" />\n      <recent name=\"$PROJECT_DIR$/app/src/main/res/layout\" />\n      <recent name=\"$PROJECT_DIR$/app/src/main/res/animator\" />\n      <recent name=\"$PROJECT_DIR$/app/src/main/res/color\" />\n    </key>\n    <key name=\"MoveFile.RECENT_KEYS\">\n      <recent name=\"$PROJECT_DIR$/app/src/main/res/drawable\" />\n      <recent name=\"$PROJECT_DIR$/app/src/main/res/color\" />\n    </key>\n    <key name=\"K2MoveDeclarationsDialog.RECENT_PACKAGE_KEY\">\n      <recent name=\"xyz.mpv.is.xyz.mpv\" />\n      <recent name=\"com.example.stremiompvplayer.network\" />\n      <recent name=\"com.example.stremiompvplayer.models\" />\n      <recent name=\"com.example.stremiompvplayer.data\" />\n      <recent name=\"com.example.stremiompvplayer.viewmodels\" />\n    </key>\n  </component>\n  <component name=\"RunManager\">\n    <configuration name=\"app\" type=\"AndroidRunConfigurationType\" factoryName=\"Android App\" activateToolWindowBeforeRun=\"false\">\n      <module name=\"BINGEUI.app\" />\n      <option name=\"ANDROID_RUN_CONFIGURATION_SCHEMA_VERSION\" value=\"1\" />\n      <option name=\"DEPLOY\" value=\"true\" />\n      <option name=\"DEPLOY_APK_FROM_BUNDLE\" value=\"false\" />\n      <option name=\"DEPLOY_AS_INSTANT\" value=\"false\" />\n      <option name=\"ARTIFACT_NAME\" value=\"\" />\n      <option name=\"PM_INSTALL_OPTIONS\" value=\"\" />\n      <option name=\"ALL_USERS\" value=\"false\" />\n      <option name=\"ALWAYS_INSTALL_WITH_PM\" value=\"false\" />\n      <option name=\"ALLOW_ASSUME_VERIFIED\" value=\"false\" />\n      <option name=\"CLEAR_APP_STORAGE\" value=\"false\" />\n      <option name=\"DYNAMIC_FEATURES_DISABLED_LIST\" value=\"\" />\n      <option name=\"ACTIVITY_EXTRA_FLAGS\" value=\"\" />\n      <option name=\"MODE\" value=\"default_activity\" />\n      <option name=\"RESTORE_ENABLED\" value=\"false\" />\n      <option name=\"RESTORE_FILE\" value=\"\" />\n      <option name=\"RESTORE_FRESH_INSTALL_ONLY\" value=\"false\" />\n      <option name=\"CLEAR_LOGCAT\" value=\"false\" />\n      <option name=\"SHOW_LOGCAT_AUTOMATICALLY\" value=\"false\" />\n      <option name=\"TARGET_SELECTION_MODE\" value=\"DEVICE_AND_SNAPSHOT_COMBO_BOX\" />\n      <option name=\"SELECTED_CLOUD_MATRIX_CONFIGURATION_ID\" value=\"-1\" />\n      <option name=\"SELECTED_CLOUD_MATRIX_PROJECT_ID\" value=\"\" />\n      <option name=\"DEBUGGER_TYPE\" value=\"Auto\" />\n      <Auto>\n        <option name=\"USE_JAVA_AWARE_DEBUGGER\" value=\"false\" />\n        <option name=\"SHOW_STATIC_VARS\" value=\"true\" />\n        <option name=\"WORKING_DIR\" value=\"\" />\n        <option name=\"TARGET_LOGGING_CHANNELS\" value=\"lldb process:gdb-remote packets\" />\n        <option name=\"SHOW_OPTIMIZED_WARNING\" value=\"true\" />\n        <option name=\"ATTACH_ON_WAIT_FOR_DEBUGGER\" value=\"false\" />\n        <option name=\"DEBUG_SANDBOX_SDK\" value=\"false\" />\n      </Auto>\n      <Hybrid>\n        <option name=\"USE_JAVA_AWARE_DEBUGGER\" value=\"false\" />\n        <option name=\"SHOW_STATIC_VARS\" value=\"true\" />\n        <option name=\"WORKING_DIR\" value=\"\" />\n        <option name=\"TARGET_LOGGING_CHANNELS\" value=\"lldb process:gdb-remote packets\" />\n        <option name=\"SHOW_OPTIMIZED_WARNING\" value=\"true\" />\n        <option name=\"ATTACH_ON_WAIT_FOR_DEBUGGER\" value=\"false\" />\n        <option name=\"DEBUG_SANDBOX_SDK\" value=\"false\" />\n      </Hybrid>\n      <Java>\n        <option name=\"ATTACH_ON_WAIT_FOR_DEBUGGER\" value=\"false\" />\n        <option name=\"DEBUG_SANDBOX_SDK\" value=\"false\" />\n      </Java>\n      <Native>\n        <option name=\"USE_JAVA_AWARE_DEBUGGER\" value=\"false\" />\n        <option name=\"SHOW_STATIC_VARS\" value=\"true\" />\n        <option name=\"WORKING_DIR\" value=\"\" />\n        <option name=\"TARGET_LOGGING_CHANNELS\" value=\"lldb process:gdb-remote packets\" />\n        <option name=\"SHOW_OPTIMIZED_WARNING\" value=\"true\" />\n        <option name=\"ATTACH_ON_WAIT_FOR_DEBUGGER\" value=\"false\" />\n        <option name=\"DEBUG_SANDBOX_SDK\" value=\"false\" />\n      </Native>\n      <Profilers>\n        <option name=\"ADVANCED_PROFILING_ENABLED\" value=\"false\" />\n        <option name=\"STARTUP_PROFILING_ENABLED\" value=\"false\" />\n        <option name=\"STARTUP_CPU_PROFILING_ENABLED\" value=\"false\" />\n        <option name=\"STARTUP_CPU_PROFILING_CONFIGURATION_NAME\" value=\"Java/Kotlin Method Sample (legacy)\" />\n        <option name=\"STARTUP_NATIVE_MEMORY_PROFILING_ENABLED\" value=\"false\" />\n        <option name=\"NATIVE_MEMORY_SAMPLE_RATE_BYTES\" value=\"2048\" />\n      </Profilers>\n      <option name=\"DEEP_LINK\" value=\"\" />\n      <option name=\"ACTIVITY\" value=\"\" />\n      <option name=\"ACTIVITY_CLASS\" value=\"\" />\n      <option name=\"SEARCH_ACTIVITY_IN_GLOBAL_SCOPE\" value=\"false\" />\n      <option name=\"SKIP_ACTIVITY_VALIDATION\" value=\"false\" />\n      <method v=\"2\">\n        <option name=\"Android.Gradle.BeforeRunTask\" enabled=\"true\" />\n      </method>\n    </configuration>\n  </component>\n  <component name=\"TaskManager\">\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\n      <changelist id=\"2c02766e-19a3-4317-ae82-959ae60a24cb\" name=\"Changes\" comment=\"\" />\n      <created>1763370382391</created>\n      <option name=\"number\" value=\"Default\" />\n      <option name=\"presentableId\" value=\"Default\" />\n      <updated>1763370382391</updated>\n    </task>\n    <task id=\"LOCAL-00045\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763595922620</created>\n      <option name=\"number\" value=\"00045\" />\n      <option name=\"presentableId\" value=\"LOCAL-00045\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763595922620</updated>\n    </task>\n    <task id=\"LOCAL-00046\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763595971951</created>\n      <option name=\"number\" value=\"00046\" />\n      <option name=\"presentableId\" value=\"LOCAL-00046\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763595971951</updated>\n    </task>\n    <task id=\"LOCAL-00047\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763598212987</created>\n      <option name=\"number\" value=\"00047\" />\n      <option name=\"presentableId\" value=\"LOCAL-00047\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763598212987</updated>\n    </task>\n    <task id=\"LOCAL-00048\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763598221577</created>\n      <option name=\"number\" value=\"00048\" />\n      <option name=\"presentableId\" value=\"LOCAL-00048\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763598221577</updated>\n    </task>\n    <task id=\"LOCAL-00049\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763605788880</created>\n      <option name=\"number\" value=\"00049\" />\n      <option name=\"presentableId\" value=\"LOCAL-00049\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763605788880</updated>\n    </task>\n    <task id=\"LOCAL-00050\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763643379483</created>\n      <option name=\"number\" value=\"00050\" />\n      <option name=\"presentableId\" value=\"LOCAL-00050\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763643379483</updated>\n    </task>\n    <task id=\"LOCAL-00051\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763643383811</created>\n      <option name=\"number\" value=\"00051\" />\n      <option name=\"presentableId\" value=\"LOCAL-00051\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763643383811</updated>\n    </task>\n    <task id=\"LOCAL-00052\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763655904325</created>\n      <option name=\"number\" value=\"00052\" />\n      <option name=\"presentableId\" value=\"LOCAL-00052\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763655904325</updated>\n    </task>\n    <task id=\"LOCAL-00053\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763655908225</created>\n      <option name=\"number\" value=\"00053\" />\n      <option name=\"presentableId\" value=\"LOCAL-00053\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763655908225</updated>\n    </task>\n    <task id=\"LOCAL-00054\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763669116147</created>\n      <option name=\"number\" value=\"00054\" />\n      <option name=\"presentableId\" value=\"LOCAL-00054\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763669116148</updated>\n    </task>\n    <task id=\"LOCAL-00055\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763679361942</created>\n      <option name=\"number\" value=\"00055\" />\n      <option name=\"presentableId\" value=\"LOCAL-00055\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763679361942</updated>\n    </task>\n    <task id=\"LOCAL-00056\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763679373264</created>\n      <option name=\"number\" value=\"00056\" />\n      <option name=\"presentableId\" value=\"LOCAL-00056\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763679373264</updated>\n    </task>\n    <task id=\"LOCAL-00057\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763679827037</created>\n      <option name=\"number\" value=\"00057\" />\n      <option name=\"presentableId\" value=\"LOCAL-00057\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763679827037</updated>\n    </task>\n    <task id=\"LOCAL-00058\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763682505573</created>\n      <option name=\"number\" value=\"00058\" />\n      <option name=\"presentableId\" value=\"LOCAL-00058\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763682505573</updated>\n    </task>\n    <task id=\"LOCAL-00059\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763686235292</created>\n      <option name=\"number\" value=\"00059\" />\n      <option name=\"presentableId\" value=\"LOCAL-00059\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763686235292</updated>\n    </task>\n    <task id=\"LOCAL-00060\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763686243806</created>\n      <option name=\"number\" value=\"00060\" />\n      <option name=\"presentableId\" value=\"LOCAL-00060\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763686243806</updated>\n    </task>\n    <task id=\"LOCAL-00061\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763691342932</created>\n      <option name=\"number\" value=\"00061\" />\n      <option name=\"presentableId\" value=\"LOCAL-00061\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763691342933</updated>\n    </task>\n    <task id=\"LOCAL-00062\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763758475334</created>\n      <option name=\"number\" value=\"00062\" />\n      <option name=\"presentableId\" value=\"LOCAL-00062\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763758475334</updated>\n    </task>\n    <task id=\"LOCAL-00063\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763758496450</created>\n      <option name=\"number\" value=\"00063\" />\n      <option name=\"presentableId\" value=\"LOCAL-00063\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763758496450</updated>\n    </task>\n    <task id=\"LOCAL-00064\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763772979008</created>\n      <option name=\"number\" value=\"00064\" />\n      <option name=\"presentableId\" value=\"LOCAL-00064\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763772979008</updated>\n    </task>\n    <task id=\"LOCAL-00065\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763780792504</created>\n      <option name=\"number\" value=\"00065\" />\n      <option name=\"presentableId\" value=\"LOCAL-00065\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763780792504</updated>\n    </task>\n    <task id=\"LOCAL-00066\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763781680385</created>\n      <option name=\"number\" value=\"00066\" />\n      <option name=\"presentableId\" value=\"LOCAL-00066\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763781680385</updated>\n    </task>\n    <task id=\"LOCAL-00067\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763781687735</created>\n      <option name=\"number\" value=\"00067\" />\n      <option name=\"presentableId\" value=\"LOCAL-00067\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763781687735</updated>\n    </task>\n    <task id=\"LOCAL-00068\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763841397996</created>\n      <option name=\"number\" value=\"00068\" />\n      <option name=\"presentableId\" value=\"LOCAL-00068\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763841397997</updated>\n    </task>\n    <task id=\"LOCAL-00069\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763841402897</created>\n      <option name=\"number\" value=\"00069\" />\n      <option name=\"presentableId\" value=\"LOCAL-00069\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763841402897</updated>\n    </task>\n    <task id=\"LOCAL-00070\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763843391998</created>\n      <option name=\"number\" value=\"00070\" />\n      <option name=\"presentableId\" value=\"LOCAL-00070\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763843391998</updated>\n    </task>\n    <task id=\"LOCAL-00071\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763843395344</created>\n      <option name=\"number\" value=\"00071\" />\n      <option name=\"presentableId\" value=\"LOCAL-00071\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763843395344</updated>\n    </task>\n    <task id=\"LOCAL-00072\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763855755799</created>\n      <option name=\"number\" value=\"00072\" />\n      <option name=\"presentableId\" value=\"LOCAL-00072\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763855755799</updated>\n    </task>\n    <task id=\"LOCAL-00073\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763855759947</created>\n      <option name=\"number\" value=\"00073\" />\n      <option name=\"presentableId\" value=\"LOCAL-00073\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763855759947</updated>\n    </task>\n    <task id=\"LOCAL-00074\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763858879211</created>\n      <option name=\"number\" value=\"00074\" />\n      <option name=\"presentableId\" value=\"LOCAL-00074\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763858879211</updated>\n    </task>\n    <task id=\"LOCAL-00075\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763858883537</created>\n      <option name=\"number\" value=\"00075\" />\n      <option name=\"presentableId\" value=\"LOCAL-00075\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763858883537</updated>\n    </task>\n    <task id=\"LOCAL-00076\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763860063035</created>\n      <option name=\"number\" value=\"00076\" />\n      <option name=\"presentableId\" value=\"LOCAL-00076\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763860063036</updated>\n    </task>\n    <task id=\"LOCAL-00077\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763861917655</created>\n      <option name=\"number\" value=\"00077\" />\n      <option name=\"presentableId\" value=\"LOCAL-00077\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763861917655</updated>\n    </task>\n    <task id=\"LOCAL-00078\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763914215899</created>\n      <option name=\"number\" value=\"00078\" />\n      <option name=\"presentableId\" value=\"LOCAL-00078\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763914215899</updated>\n    </task>\n    <task id=\"LOCAL-00079\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763914363460</created>\n      <option name=\"number\" value=\"00079\" />\n      <option name=\"presentableId\" value=\"LOCAL-00079\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763914363460</updated>\n    </task>\n    <task id=\"LOCAL-00080\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763917831928</created>\n      <option name=\"number\" value=\"00080\" />\n      <option name=\"presentableId\" value=\"LOCAL-00080\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763917831928</updated>\n    </task>\n    <task id=\"LOCAL-00081\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763936367713</created>\n      <option name=\"number\" value=\"00081\" />\n      <option name=\"presentableId\" value=\"LOCAL-00081\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763936367714</updated>\n    </task>\n    <task id=\"LOCAL-00082\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763936388182</created>\n      <option name=\"number\" value=\"00082\" />\n      <option name=\"presentableId\" value=\"LOCAL-00082\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763936388182</updated>\n    </task>\n    <task id=\"LOCAL-00083\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763942318999</created>\n      <option name=\"number\" value=\"00083\" />\n      <option name=\"presentableId\" value=\"LOCAL-00083\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763942318999</updated>\n    </task>\n    <task id=\"LOCAL-00084\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763947119274</created>\n      <option name=\"number\" value=\"00084\" />\n      <option name=\"presentableId\" value=\"LOCAL-00084\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763947119274</updated>\n    </task>\n    <task id=\"LOCAL-00085\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1763947127564</created>\n      <option name=\"number\" value=\"00085\" />\n      <option name=\"presentableId\" value=\"LOCAL-00085\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1763947127564</updated>\n    </task>\n    <task id=\"LOCAL-00086\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1764179361354</created>\n      <option name=\"number\" value=\"00086\" />\n      <option name=\"presentableId\" value=\"LOCAL-00086\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1764179361356</updated>\n    </task>\n    <task id=\"LOCAL-00087\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1764179783457</created>\n      <option name=\"number\" value=\"00087\" />\n      <option name=\"presentableId\" value=\"LOCAL-00087\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1764179783457</updated>\n    </task>\n    <task id=\"LOCAL-00088\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1764180643992</created>\n      <option name=\"number\" value=\"00088\" />\n      <option name=\"presentableId\" value=\"LOCAL-00088\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1764180643992</updated>\n    </task>\n    <task id=\"LOCAL-00089\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1764194245199</created>\n      <option name=\"number\" value=\"00089\" />\n      <option name=\"presentableId\" value=\"LOCAL-00089\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1764194245199</updated>\n    </task>\n    <task id=\"LOCAL-00090\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1764194251084</created>\n      <option name=\"number\" value=\"00090\" />\n      <option name=\"presentableId\" value=\"LOCAL-00090\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1764194251084</updated>\n    </task>\n    <task id=\"LOCAL-00091\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1764203549351</created>\n      <option name=\"number\" value=\"00091\" />\n      <option name=\"presentableId\" value=\"LOCAL-00091\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1764203549351</updated>\n    </task>\n    <task id=\"LOCAL-00092\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1764245441504</created>\n      <option name=\"number\" value=\"00092\" />\n      <option name=\"presentableId\" value=\"LOCAL-00092\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1764245441505</updated>\n    </task>\n    <task id=\"LOCAL-00093\" summary=\"Update visual assets\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1764254096468</created>\n      <option name=\"number\" value=\"00093\" />\n      <option name=\"presentableId\" value=\"LOCAL-00093\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1764254096468</updated>\n    </task>\n    <option name=\"localTasksCounter\" value=\"94\" />\n    <servers />\n  </component>\n  <component name=\"VcsManagerConfiguration\">\n    <ignored-roots>\n      <path value=\"$PROJECT_DIR$/mpv-android\" />\n    </ignored-roots>\n    <MESSAGE value=\"error fixes\" />\n    <MESSAGE value=\"stremio addon implementation\" />\n    <MESSAGE value=\"Visual layout for movies page\" />\n    <MESSAGE value=\"Update visual assets\" />\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"Update visual assets\" />\n    <option name=\"GROUP_MULTIFILE_MERGE_BY_DIRECTORY\" value=\"true\" />\n  </component>\n  <component name=\"play_dynamic_filters_status\">\n    <option name=\"appIdToCheckInfo\">\n      <map>\n        <entry key=\"com.example.stremiompvplayer\">\n          <value>\n            <CheckInfo lastCheckTimestamp=\"1764374553557\" />\n          </value>\n        </entry>\n        <entry key=\"com.example.stremiompvplayer.test\">\n          <value>\n            <CheckInfo lastCheckTimestamp=\"1764374553557\" />\n          </value>\n        </entry>\n      </map>\n    </option>\n  </component>\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision bb63d4732ba51fda5ec6a54585249992e08c2170)
+++ b/.idea/workspace.xml	(date 1764435083614)
@@ -230,6 +230,11 @@
           <theme>@style/Theme.StremioMPVPlayer</theme>
         </config>
       </layout>
+      <layout url="file://$PROJECT_DIR$/app/src/main/res/layout/dialog_startup_loading.xml">
+        <config>
+          <theme>@style/Theme.StremioMPVPlayer</theme>
+        </config>
+      </layout>
       <layout url="file://$PROJECT_DIR$/app/src/main/res/layout/dialog_stream_selection.xml">
         <config>
           <theme>@style/Theme.StremioMPVPlayer</theme>
@@ -322,17 +327,11 @@
   </component>
   <component name="ChangeListManager">
     <list default="true" id="2c02766e-19a3-4317-ae82-959ae60a24cb" name="Changes" comment="Update visual assets">
-      <change beforePath="$PROJECT_DIR$/app/build.gradle" beforeDir="false" afterPath="$PROJECT_DIR$/app/build.gradle" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/MainActivity.kt" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/MainActivity.kt" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/PlayerActivity.kt" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/PlayerActivity.kt" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/ui/home/HomeFragment.kt" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/ui/home/HomeFragment.kt" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/res/drawable/gradient_overlay.xml" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/res/drawable/gradient_overlay.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/res/layout/activity_player.xml" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/res/layout/activity_player.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/ui/discover/DiscoverFragment.kt" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/ui/discover/DiscoverFragment.kt" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/ui/library/LibraryFragment.kt" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/ui/library/LibraryFragment.kt" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/viewmodels/HomeViewModel.kt" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/java/com/example/stremiompvplayer/viewmodels/HomeViewModel.kt" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/app/src/main/res/layout/fragment_home.xml" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/res/layout/fragment_home.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/res/layout/fragment_library_new.xml" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/res/layout/fragment_library_new.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/res/layout/item_poster.xml" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/res/layout/item_poster.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/app/src/main/res/values/dimens.xml" beforeDir="false" afterPath="$PROJECT_DIR$/app/src/main/res/values/dimens.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/build.gradle" beforeDir="false" afterPath="$PROJECT_DIR$/build.gradle" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -342,7 +341,7 @@
   <component name="ClangdSettings">
     <option name="formatViaClangd" value="false" />
   </component>
-  <component name="ExecutionTargetManager" SELECTED_TARGET="device_and_snapshot_combo_box_target[DeviceId(pluginId=Default, isTemplate=false, identifier=serial=192.168.1.235:5555;connection=bd7c84a1)]" />
+  <component name="ExecutionTargetManager" SELECTED_TARGET="device_and_snapshot_combo_box_target[DeviceId(pluginId=PhysicalDevice, isTemplate=false, identifier=serial=R92Y50E01BX)]" />
   <component name="ExternalProjectsData">
     <projectState path="$PROJECT_DIR$">
       <ProjectState />
@@ -372,9 +371,9 @@
         <option value="Class" />
         <option value="Kotlin File" />
         <option value="valueResourceFile" />
-        <option value="resourceFile" />
-        <option value="Kotlin Class" />
         <option value="layoutResourceFile" />
+        <option value="Kotlin Class" />
+        <option value="resourceFile" />
       </list>
     </option>
   </component>
@@ -382,11 +381,6 @@
     <option name="BUILD_TARGET_KEY" value="apk" />
   </component>
   <component name="Git.Settings">
-    <option name="RECENT_BRANCH_BY_REPOSITORY">
-      <map>
-        <entry key="$PROJECT_DIR$" value="master" />
-      </map>
-    </option>
     <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
   </component>
   <component name="GitHubPullRequestSearchHistory">{
@@ -416,29 +410,29 @@
     <option name="hideEmptyMiddlePackages" value="true" />
     <option name="showLibraryContents" value="true" />
   </component>
-  <component name="PropertiesComponent"><![CDATA[{
-  "keyToString": {
-    "Android App.app.executor": "Run",
-    "ApkExportedModule": "BINGE.app",
-    "ModuleVcsDetector.initialDetectionPerformed": "true",
-    "RunOnceActivity.ShowReadmeOnStart": "true",
-    "RunOnceActivity.TerminalTabsStorage.copyFrom.TerminalArrangementManager": "true",
-    "RunOnceActivity.cidr.known.project.marker": "true",
-    "RunOnceActivity.git.unshallow": "true",
-    "RunOnceActivity.readMode.enableVisualFormatting": "true",
-    "SHARE_PROJECT_CONFIGURATION_FILES": "true",
-    "cf.first.check.clang-format": "false",
-    "cidr.known.project.marker": "true",
-    "com.google.services.firebase.aqiPopupShown": "true",
-    "git-widget-placeholder": "UpdateUI",
-    "last_opened_file_path": "/home/jon/AndroidStudioProjects/BINGE3/app/src/main/res/drawable",
-    "project.structure.last.edited": "Variables",
-    "project.structure.proportion": "0.17",
-    "project.structure.side.proportion": "0.0",
-    "recommended.upgrade.last.time.stamp": "1763425586759",
-    "settings.editor.selected.configurable": "memory.settings"
+  <component name="PropertiesComponent">{
+  &quot;keyToString&quot;: {
+    &quot;Android App.app.executor&quot;: &quot;Run&quot;,
+    &quot;ApkExportedModule&quot;: &quot;BINGE.app&quot;,
+    &quot;ModuleVcsDetector.initialDetectionPerformed&quot;: &quot;true&quot;,
+    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,
+    &quot;RunOnceActivity.TerminalTabsStorage.copyFrom.TerminalArrangementManager&quot;: &quot;true&quot;,
+    &quot;RunOnceActivity.cidr.known.project.marker&quot;: &quot;true&quot;,
+    &quot;RunOnceActivity.git.unshallow&quot;: &quot;true&quot;,
+    &quot;RunOnceActivity.readMode.enableVisualFormatting&quot;: &quot;true&quot;,
+    &quot;SHARE_PROJECT_CONFIGURATION_FILES&quot;: &quot;true&quot;,
+    &quot;cf.first.check.clang-format&quot;: &quot;false&quot;,
+    &quot;cidr.known.project.marker&quot;: &quot;true&quot;,
+    &quot;com.google.services.firebase.aqiPopupShown&quot;: &quot;true&quot;,
+    &quot;git-widget-placeholder&quot;: &quot;master&quot;,
+    &quot;last_opened_file_path&quot;: &quot;/home/jon/AndroidStudioProjects/BINGE3/app/src/main/res/drawable&quot;,
+    &quot;project.structure.last.edited&quot;: &quot;Variables&quot;,
+    &quot;project.structure.proportion&quot;: &quot;0.17&quot;,
+    &quot;project.structure.side.proportion&quot;: &quot;0.0&quot;,
+    &quot;recommended.upgrade.last.time.stamp&quot;: &quot;1763425586759&quot;,
+    &quot;settings.editor.selected.configurable&quot;: &quot;memory.settings&quot;
   }
-}]]></component>
+}</component>
   <component name="RecentsManager">
     <key name="android.template.326038633">
       <recent name="com.example.stremiompvplayer" />
@@ -544,22 +538,6 @@
       <option name="presentableId" value="Default" />
       <updated>1763370382391</updated>
     </task>
-    <task id="LOCAL-00045" summary="Update visual assets">
-      <option name="closed" value="true" />
-      <created>1763595922620</created>
-      <option name="number" value="00045" />
-      <option name="presentableId" value="LOCAL-00045" />
-      <option name="project" value="LOCAL" />
-      <updated>1763595922620</updated>
-    </task>
-    <task id="LOCAL-00046" summary="Update visual assets">
-      <option name="closed" value="true" />
-      <created>1763595971951</created>
-      <option name="number" value="00046" />
-      <option name="presentableId" value="LOCAL-00046" />
-      <option name="project" value="LOCAL" />
-      <updated>1763595971951</updated>
-    </task>
     <task id="LOCAL-00047" summary="Update visual assets">
       <option name="closed" value="true" />
       <created>1763598212987</created>
@@ -936,7 +914,23 @@
       <option name="project" value="LOCAL" />
       <updated>1764254096468</updated>
     </task>
-    <option name="localTasksCounter" value="94" />
+    <task id="LOCAL-00094" summary="Update visual assets">
+      <option name="closed" value="true" />
+      <created>1764420225558</created>
+      <option name="number" value="00094" />
+      <option name="presentableId" value="LOCAL-00094" />
+      <option name="project" value="LOCAL" />
+      <updated>1764420225559</updated>
+    </task>
+    <task id="LOCAL-00095" summary="Update visual assets">
+      <option name="closed" value="true" />
+      <created>1764420231043</created>
+      <option name="number" value="00095" />
+      <option name="presentableId" value="LOCAL-00095" />
+      <option name="project" value="LOCAL" />
+      <updated>1764420231043</updated>
+    </task>
+    <option name="localTasksCounter" value="96" />
     <servers />
   </component>
   <component name="VcsManagerConfiguration">
@@ -955,12 +949,12 @@
       <map>
         <entry key="com.example.stremiompvplayer">
           <value>
-            <CheckInfo lastCheckTimestamp="1764374553557" />
+            <CheckInfo lastCheckTimestamp="1764430469612" />
           </value>
         </entry>
         <entry key="com.example.stremiompvplayer.test">
           <value>
-            <CheckInfo lastCheckTimestamp="1764374553557" />
+            <CheckInfo lastCheckTimestamp="1764430469615" />
           </value>
         </entry>
       </map>
