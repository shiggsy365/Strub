<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools">

    <data />

    <androidx.constraintlayout.widget.ConstraintLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/md_theme_background">

        <!-- Dynamic background image with parallax effect -->
        <ImageView
            android:id="@+id/pageBackground"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:scaleType="centerCrop"
            android:alpha="0.15"
            android:contentDescription="Background" />

        <!-- Gradient overlay for better text readability -->
        <View
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="@drawable/gradient_overlay_modern" />

        <!-- Main content container -->
        <androidx.constraintlayout.widget.ConstraintLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:padding="@dimen/spacing_md">

            <!-- Sidebar for categories -->
            <com.google.android.material.card.MaterialCardView
                android:id="@+id/sidebarCard"
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:layout_marginEnd="@dimen/spacing_md"
                android:layout_marginBottom="@dimen/spacing_md"
                app:layout_constraintWidth_percent="0.25"
                app:layout_constraintHeight_percent="0.35"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintBottom_toTopOf="@id/contentGrid"
                app:cardBackgroundColor="@color/glass_surface"
                app:cardCornerRadius="@dimen/corner_radius_xlarge"
                app:cardElevation="@dimen/elevation_large"
                app:strokeWidth="1dp"
                app:strokeColor="@color/md_theme_outline">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical"
                    android:padding="@dimen/spacing_md">

                    <TextView
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:text="Categories"
                        android:textAppearance="?attr/textAppearanceTitleMedium"
                        android:textColor="@color/text_primary"
                        android:layout_marginBottom="@dimen/spacing_md" />

                    <androidx.recyclerview.widget.RecyclerView
                        android:id="@+id/rvSidebar"
                        android:layout_width="match_parent"
                        android:layout_height="0dp"
                        android:layout_weight="1"
                        android:scrollbars="none"
                        android:clipToPadding="false"
                        android:overScrollMode="never" />

                </LinearLayout>
            </com.google.android.material.card.MaterialCardView>

            <!-- Hero section for selected content -->
            <com.google.android.material.card.MaterialCardView
                android:id="@+id/heroCard"
                android:layout_width="0dp"
                android:layout_height="0dp"
                android:layout_marginEnd="@dimen/spacing_md"
                android:layout_marginBottom="@dimen/spacing_md"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintEnd_toStartOf="@id/sidebarCard"
                app:layout_constraintTop_toTopOf="parent"
                app:layout_constraintBottom_toTopOf="@id/contentGrid"
                app:cardBackgroundColor="@color/glass_surface"
                app:cardCornerRadius="@dimen/corner_radius_xlarge"
                app:cardElevation="@dimen/elevation_large"
                app:strokeWidth="1dp"
                app:strokeColor="@color/md_theme_outline">

                <androidx.constraintlayout.widget.ConstraintLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:padding="@dimen/spacing_xl">

                    <!-- Content metadata column -->
                    <LinearLayout
                        android:id="@+id/metaColumn"
                        android:layout_width="0dp"
                        android:layout_height="match_parent"
                        android:orientation="vertical"
                        android:gravity="center_vertical"
                        app:layout_constraintWidth_percent="0.4"
                        app:layout_constraintStart_toStartOf="parent"
                        app:layout_constraintTop_toTopOf="parent"
                        app:layout_constraintBottom_toBottomOf="parent">

                        <!-- Logo/Title container with aspect ratio -->
                        <androidx.constraintlayout.widget.ConstraintLayout
                            android:id="@+id/logoContainer"
                            android:layout_width="match_parent"
                            android:layout_height="0dp"
                            android:layout_weight="1"
                            android:layout_marginBottom="@dimen/spacing_lg">

                            <ImageView
                                android:id="@+id/detailLogo"
                                android:layout_width="0dp"
                                android:layout_height="0dp"
                                android:scaleType="fitCenter"
                                android:adjustViewBounds="true"
                                android:visibility="gone"
                                android:contentDescription="Content Logo"
                                app:layout_constraintTop_toTopOf="parent"
                                app:layout_constraintBottom_toBottomOf="parent"
                                app:layout_constraintStart_toStartOf="parent"
                                app:layout_constraintEnd_toEndOf="parent"
                                tools:src="@drawable/movie" />

                            <TextView
                                android:id="@+id/detailTitle"
                                android:layout_width="0dp"
                                android:layout_height="wrap_content"
                                android:layout_marginHorizontal="@dimen/spacing_md"
                                android:gravity="center"
                                android:textAppearance="?attr/textAppearanceDisplaySmall"
                                android:textColor="@color/text_primary"
                                android:maxLines="3"
                                android:ellipsize="end"
                                android:lineSpacingExtra="@dimen/spacing_xs"
                                app:layout_constraintTop_toTopOf="parent"
                                app:layout_constraintBottom_toBottomOf="parent"
                                app:layout_constraintStart_toStartOf="parent"
                                app:layout_constraintEnd_toEndOf="parent"
                                tools:text="The Matrix Resurrections" />

                        </androidx.constraintlayout.widget.ConstraintLayout>

                        <!-- Metadata row -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:gravity="center"
                            android:layout_marginBottom="@dimen/spacing_sm">

                            <TextView
                                android:id="@+id/detailDate"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:textAppearance="?attr/textAppearanceBodyLarge"
                                android:textColor="@color/text_secondary"
                                android:layout_marginEnd="@dimen/spacing_md"
                                tools:text="2023" />

                            <View
                                android:layout_width="4dp"
                                android:layout_height="4dp"
                                android:layout_marginEnd="@dimen/spacing_md"
                                android:background="@drawable/dot_separator" />

                            <TextView
                                android:id="@+id/detailRating"
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:textAppearance="?attr/textAppearanceBodyLarge"
                                android:textColor="@color/warning_orange"
                                android:textStyle="bold"
                                android:drawableStart="@drawable/ic_star"
                                android:drawablePadding="@dimen/spacing_xs"
                                android:visibility="gone"
                                app:drawableTint="@color/warning_orange"
                                tools:text="8.5" 
                                tools:visibility="visible" />

                        </LinearLayout>

                    </LinearLayout>

                    <!-- Description scroll area -->
                    <androidx.core.widget.NestedScrollView
                        android:layout_width="0dp"
                        android:layout_height="match_parent"
                        android:layout_marginStart="@dimen/spacing_xl"
                        android:scrollbars="none"
                        android:overScrollMode="never"
                        android:fadeScrollbars="true"
                        app:layout_constraintStart_toEndOf="@id/metaColumn"
                        app:layout_constraintEnd_toEndOf="parent"
                        app:layout_constraintTop_toTopOf="parent"
                        app:layout_constraintBottom_toBottomOf="parent">

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="vertical"
                            android:gravity="center_vertical"
                            android:minHeight="300dp">

                            <TextView
                                android:id="@+id/detailDescription"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:textAppearance="?attr/textAppearanceBodyLarge"
                                android:textColor="@color/text_secondary"
                                android:lineSpacingExtra="@dimen/spacing_xs"
                                android:justificationMode="inter_word"
                                tools:text="In a world where technology has advanced beyond imagination, humanity faces its greatest challenge yet. This epic tale of survival, love, and determination will keep you on the edge of your seat from beginning to end." />

                        </LinearLayout>

                    </androidx.core.widget.NestedScrollView>

                </androidx.constraintlayout.widget.ConstraintLayout>

            </com.google.android.material.card.MaterialCardView>

            <!-- Content grid -->
            <com.google.android.material.card.MaterialCardView
                android:id="@+id/contentGrid"
                android:layout_width="0dp"
                android:layout_height="0dp"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintBottom_toBottomOf="parent"
                app:layout_constraintHeight_percent="0.6"
                app:cardBackgroundColor="@color/glass_surface_light"
                app:cardCornerRadius="@dimen/corner_radius_xlarge"
                app:cardElevation="@dimen/elevation_medium"
                app:strokeWidth="1dp"
                app:strokeColor="@color/md_theme_outline">

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical"
                    android:padding="@dimen/spacing_lg">

                    <!-- Content header -->
                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="horizontal"
                        android:gravity="center_vertical"
                        android:layout_marginBottom="@dimen/spacing_lg">

                        <TextView
                            android:id="@+id/contentSectionTitle"
                            android:layout_width="0dp"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:text="Discover"
                            android:textAppearance="?attr/textAppearanceTitleLarge"
                            android:textColor="@color/text_primary" />

                        <!-- View toggle buttons -->
                        <com.google.android.material.button.MaterialButtonToggleGroup
                            android:id="@+id/viewToggleGroup"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            app:singleSelection="true"
                            app:selectionRequired="true"
                            android:visibility="gone">

                            <com.google.android.material.button.MaterialButton
                                android:id="@+id/btnGridView"
                                style="@style/Widget.App.Button.Outlined"
                                android:layout_width="48dp"
                                android:layout_height="48dp"
                                app:icon="@drawable/ic_grid_view"
                                app:iconPadding="0dp"
                                android:checked="true" />

                            <com.google.android.material.button.MaterialButton
                                android:id="@+id/btnListView"
                                style="@style/Widget.App.Button.Outlined"
                                android:layout_width="48dp"
                                android:layout_height="48dp"
                                app:icon="@drawable/ic_list_view"
                                app:iconPadding="0dp" />

                        </com.google.android.material.button.MaterialButtonToggleGroup>

                    </LinearLayout>

                    <!-- Content RecyclerView -->
                    <androidx.recyclerview.widget.RecyclerView
                        android:id="@+id/rvContent"
                        android:layout_width="match_parent"
                        android:layout_height="0dp"
                        android:layout_weight="1"
                        android:clipToPadding="false"
                        android:paddingHorizontal="@dimen/spacing_sm"
                        android:scrollbars="none"
                        android:overScrollMode="never"
                        android:focusable="true"
                        android:nextFocusUp="@id/rvSidebar"
                        tools:listitem="@layout/item_poster_modern" />

                </LinearLayout>
            </com.google.android.material.card.MaterialCardView>

        </androidx.constraintlayout.widget.ConstraintLayout>

        <!-- Loading overlay -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/loadingCard"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:visibility="gone"
            app:cardBackgroundColor="@color/glass_surface"
            app:cardCornerRadius="@dimen/corner_radius_large"
            app:cardElevation="@dimen/elevation_xlarge"
            app:layout_constraintTop_toTopOf="parent"
            app:layout_constraintBottom_toBottomOf="parent"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintEnd_toEndOf="parent">

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:gravity="center"
                android:padding="@dimen/spacing_xl">

                <ProgressBar
                    android:id="@+id/progressBar"
                    android:layout_width="@dimen/icon_size_xlarge"
                    android:layout_height="@dimen/icon_size_xlarge"
                    android:layout_marginBottom="@dimen/spacing_md" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Loading content..."
                    android:textAppearance="?attr/textAppearanceBodyMedium"
                    android:textColor="@color/text_secondary" />

            </LinearLayout>
        </com.google.android.material.card.MaterialCardView>

    </androidx.constraintlayout.widget.ConstraintLayout>
</layout>
